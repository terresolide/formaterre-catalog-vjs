import{_ as h,p as y,q as x,E as T,b as m,r as C,c as u,o as p,f as e,j as f,t as n,e as s,g as d,F as w}from"./index.js";import{r as L}from"./GridView.js";const $={class:"fmt-console"},z={style:{display:"inline-block","font-family":"monospace","max-height":"200px",overflow:"scroll",padding:"3px",width:"calc(100% - 100px)",color:"#5ddc5d",background:"#333"}},B={style:{display:"inline-block","vertical-align":"top","max-width":"95px","margin-left":"5px"}},I=["title"],A={__name:"CommandLine",setup(D){const o=y(),r=x(),c=T(),v=m(()=>{var t=o.download.url.substring(o.download.url.lastIndexOf("/")+1);if(t.match(/\.[^.]+$/))return t;if(o.download.mimeType)switch(console.log(o.download.mimeType),o.download.mimeType.toLowerCase()){case"application/zip":return o.download.title+".zip";default:return null}}),l=m(()=>{if(r.current)return r.current;if(o.download.ssoId)return r.getSsoFromId(o.download.ssoId)});function _(){o.setDownload(null)}function g(t){L({link:o.download.url,uuid:o.download.uuid,type:"commandLine",cds:o.download.group});var a=t.target;if(l&&l.value&&l.value.sso.getToken())var i='curl -k -L -H "Authorization: Bearer '+l.value.sso.getToken()+'" '+o.download.url+" -o "+o.download.name;else var i="curl "+o.download.url+" -o "+o.download.name;navigator.clipboard.writeText(i).then(function(){a.classList.add("tooltip-show"),setTimeout(function(){a.classList.remove("tooltip-show")},6e3)},function(){alert("unauthorized_clipboard")})}function b(){c&&c.value.classList.remove("tooltip-show")}return(t,a)=>{const i=C("font-awesome-icon");return p(),u("div",$,[e("div",{onClick:_,class:"fmt-close",style:{position:"absolute",right:"5px",top:"3px"}},[f(i,{icon:"fa-solid fa-remove"})]),e("h3",null,n(t.$t("command_line")),1),e("div",null,[e("div",null,[a[1]||(a[1]=e("b",null,"Archive",-1)),s(": "+n(d(o).download.name),1)]),e("div",null,[e("b",null,n(t.$t("command_to_execute"))+":",1)]),e("div",z,[l.value&&l.value.sso.getToken()?(p(),u(w,{key:0},[s('curl -k -L -H "Authorization:Bearer '+n(l.value.sso.getToken())+'" '+n(d(o).download.url)+" -o "+n(d(o).download.name),1)],64)):(p(),u(w,{key:1},[s("curl "+n(d(o).download.url)+" -o "+n(v.value),1)],64))]),e("div",B,[e("button",{ref_key:"button",ref:c,onClick:a[0]||(a[0]=k=>g(k)),title:t.$t("copy_clipboard")},[f(i,{icon:"fa-solid fa-clipboard"}),s(" "+n(t.$t("copy")),1)],8,I),e("div",{class:"clipboard-tooltip",onClick:b},n(t.$t("copied_clipboard")),1)])])])}}},S=h(A,[["__scopeId","data-v-0a1fe733"]]);export{S as default};
