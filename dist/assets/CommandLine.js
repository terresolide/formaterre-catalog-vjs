import{_ as k,p as y,q as x,C as T,b as m,r as C,c as u,o as p,f as e,j as f,t as n,e as i,g as r,F as v}from"./index.js";const L={class:"fmt-console"},$={style:{display:"inline-block","font-family":"monospace","max-height":"200px",overflow:"scroll",padding:"3px",width:"calc(100% - 100px)",color:"#5ddc5d",background:"#333"}},z={style:{display:"inline-block","vertical-align":"top","max-width":"95px","margin-left":"5px"}},B=["title"],I={__name:"CommandLine",setup(A){const o=y(),d=x(),c=T(),w=m(()=>{var t=o.download.url.substring(o.download.url.lastIndexOf("/")+1);if(t.match(/\.[^.]+$/))return t;if(o.download.mimeType)switch(console.log(o.download.mimeType),o.download.mimeType.toLowerCase()){case"application/zip":return o.download.title+".zip";default:return null}}),l=m(()=>{if(d.current)return d.current;if(o.download.ssoId)return d.getSsoFromId(o.download.ssoId)});function _(){o.setDownload(null)}function b(t){var a=t.target;if(l&&l.value&&l.value.sso.getToken())var s='curl -k -L -H "Authorization: Bearer '+l.value.sso.getToken()+'" '+o.download.url+" -o "+o.download.name;else var s="curl "+o.download.url+" -o "+o.download.name;navigator.clipboard.writeText(s).then(function(){a.classList.add("tooltip-show"),setTimeout(function(){a.classList.remove("tooltip-show")},6e3)},function(){alert("unauthorized_clipboard")})}function g(){c&&c.value.classList.remove("tooltip-show")}return(t,a)=>{const s=C("font-awesome-icon");return p(),u("div",L,[e("div",{onClick:_,class:"fmt-close",style:{position:"absolute",right:"5px",top:"3px"}},[f(s,{icon:"fa-solid fa-remove"})]),e("h3",null,n(t.$t("command_line")),1),e("div",null,[e("div",null,[a[1]||(a[1]=e("b",null,"Archive",-1)),i(": "+n(r(o).download.name),1)]),e("div",null,[e("b",null,n(t.$t("command_to_execute"))+":",1)]),e("div",$,[l.value&&l.value.sso.getToken()?(p(),u(v,{key:0},[i('curl -k -L -H "Authorization:Bearer '+n(l.value.sso.getToken())+'" '+n(r(o).download.url)+" -o "+n(r(o).download.name),1)],64)):(p(),u(v,{key:1},[i("curl "+n(r(o).download.url)+" -o "+n(w.value),1)],64))]),e("div",z,[e("button",{ref_key:"button",ref:c,onClick:a[0]||(a[0]=h=>b(h)),title:t.$t("copy_clipboard")},[f(s,{icon:"fa-solid fa-clipboard"}),i(" "+n(t.$t("copy")),1)],8,B),e("div",{class:"clipboard-tooltip",onClick:g},n(t.$t("copied_clipboard")),1)])])])}}},N=k(I,[["__scopeId","data-v-950b9535"]]);export{N as default};
