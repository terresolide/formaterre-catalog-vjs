import{c as Ve}from"./GridView.js";import{a as Mt,u as Ft}from"./index.js";function Ce(xe){throw new Error('Could not dynamically require "'+xe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}};/*! jsonpath 1.2.1 */var Je;function Bt(){return Je||(Je=1,(function(xe,ge){(function(F){xe.exports=F()})(function(){return(function F(D,P,C){function g(S,w){if(!P[S]){if(!D[S]){var o=typeof Ce=="function"&&Ce;if(!w&&o)return o(S,!0);if(N)return N(S,!0);var v=new Error("Cannot find module '"+S+"'");throw v.code="MODULE_NOT_FOUND",v}var l=P[S]={exports:{}};D[S][0].call(l.exports,function(i){var c=D[S][1][i];return g(c||i)},l,l.exports,F,D,P,C)}return P[S].exports}for(var N=typeof Ce=="function"&&Ce,T=0;T<C.length;T++)g(C[T]);return g})({"./aesprim":[function(F,D,P){(function(C,g){g(typeof P<"u"?P:C.esprima={})})(this,function(C){var g,N,T,S,w,o,v,l,i,c,r,y,I,u,n,s,m,p;g={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},N={},N[g.BooleanLiteral]="Boolean",N[g.EOF]="<end>",N[g.Identifier]="Identifier",N[g.Keyword]="Keyword",N[g.NullLiteral]="Null",N[g.NumericLiteral]="Numeric",N[g.Punctuator]="Punctuator",N[g.StringLiteral]="String",N[g.RegularExpression]="RegularExpression",T=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],S={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},w={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},v={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function h(e,t){if(!e)throw new Error("ASSERT: "+t)}function d(e){return e>=48&&e<=57}function b(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function x(e){return"01234567".indexOf(e)>=0}function k(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function L(e){return e===10||e===13||e===8232||e===8233}function R(e){return e==64||e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&v.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function $(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&v.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function J(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function H(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function z(e){return e==="eval"||e==="arguments"}function ee(e){if(c&&H(e))return!0;switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}}function se(e,t,a,f,_){var A;h(typeof a=="number","Comment must have valid position"),!(m.lastCommentStart>=a)&&(m.lastCommentStart=a,A={type:e,value:t},p.range&&(A.range=[a,f]),p.loc&&(A.loc=_),p.comments.push(A),p.attachComment&&(p.leadingComments.push(A),p.trailingComments.push(A)))}function Q(e){var t,a,f,_;for(t=r-e,a={start:{line:y,column:r-I-e}};r<u;)if(f=i.charCodeAt(r),++r,L(f)){p.comments&&(_=i.slice(t+e,r-1),a.end={line:y,column:r-I-1},se("Line",_,t,r-1,a)),f===13&&i.charCodeAt(r)===10&&++r,++y,I=r;return}p.comments&&(_=i.slice(t+e,r),a.end={line:y,column:r-I},se("Line",_,t,r,a))}function fe(){var e,t,a,f;for(p.comments&&(e=r-2,t={start:{line:y,column:r-I-2}});r<u;)if(a=i.charCodeAt(r),L(a))a===13&&i.charCodeAt(r+1)===10&&++r,++y,++r,I=r,r>=u&&W({},o.UnexpectedToken,"ILLEGAL");else if(a===42){if(i.charCodeAt(r+1)===47){++r,++r,p.comments&&(f=i.slice(e+2,r-2),t.end={line:y,column:r-I},se("Block",f,e,r,t));return}++r}else++r;W({},o.UnexpectedToken,"ILLEGAL")}function E(){var e,t;for(t=r===0;r<u;)if(e=i.charCodeAt(r),k(e))++r;else if(L(e))++r,e===13&&i.charCodeAt(r)===10&&++r,++y,I=r,t=!0;else if(e===47)if(e=i.charCodeAt(r+1),e===47)++r,++r,Q(2),t=!0;else if(e===42)++r,++r,fe();else break;else if(t&&e===45)if(i.charCodeAt(r+1)===45&&i.charCodeAt(r+2)===62)r+=3,Q(3);else break;else if(e===60)if(i.slice(r+1,r+4)==="!--")++r,++r,++r,++r,Q(4);else break;else break}function O(e){var t,a,f,_=0;for(a=e==="u"?4:2,t=0;t<a;++t)if(r<u&&b(i[r]))f=i[r++],_=_*16+"0123456789abcdef".indexOf(f.toLowerCase());else return"";return String.fromCharCode(_)}function M(){var e,t;for(e=i.charCodeAt(r++),t=String.fromCharCode(e),e===92&&(i.charCodeAt(r)!==117&&W({},o.UnexpectedToken,"ILLEGAL"),++r,e=O("u"),(!e||e==="\\"||!R(e.charCodeAt(0)))&&W({},o.UnexpectedToken,"ILLEGAL"),t=e);r<u&&(e=i.charCodeAt(r),!!$(e));)++r,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),i.charCodeAt(r)!==117&&W({},o.UnexpectedToken,"ILLEGAL"),++r,e=O("u"),(!e||e==="\\"||!$(e.charCodeAt(0)))&&W({},o.UnexpectedToken,"ILLEGAL"),t+=e);return t}function Y(){var e,t;for(e=r++;r<u;){if(t=i.charCodeAt(r),t===92)return r=e,M();if($(t))++r;else break}return i.slice(e,r)}function ne(){var e,t,a;return e=r,t=i.charCodeAt(r)===92?M():Y(),t.length===1?a=g.Identifier:ee(t)?a=g.Keyword:t==="null"?a=g.NullLiteral:t==="true"||t==="false"?a=g.BooleanLiteral:a=g.Identifier,{type:a,value:t,lineNumber:y,lineStart:I,start:e,end:r}}function j(){var e=r,t=i.charCodeAt(r),a,f=i[r],_,A,G;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++r,p.tokenize&&(t===40?p.openParenToken=p.tokens.length:t===123&&(p.openCurlyToken=p.tokens.length)),{type:g.Punctuator,value:String.fromCharCode(t),lineNumber:y,lineStart:I,start:e,end:r};default:if(a=i.charCodeAt(r+1),a===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return r+=2,{type:g.Punctuator,value:String.fromCharCode(t)+String.fromCharCode(a),lineNumber:y,lineStart:I,start:e,end:r};case 33:case 61:return r+=2,i.charCodeAt(r)===61&&++r,{type:g.Punctuator,value:i.slice(e,r),lineNumber:y,lineStart:I,start:e,end:r}}}if(G=i.substr(r,4),G===">>>=")return r+=4,{type:g.Punctuator,value:G,lineNumber:y,lineStart:I,start:e,end:r};if(A=G.substr(0,3),A===">>>"||A==="<<="||A===">>=")return r+=3,{type:g.Punctuator,value:A,lineNumber:y,lineStart:I,start:e,end:r};if(_=A.substr(0,2),f===_[1]&&"+-<>&|".indexOf(f)>=0||_==="=>")return r+=2,{type:g.Punctuator,value:_,lineNumber:y,lineStart:I,start:e,end:r};if("<>=!+-*%&|^/".indexOf(f)>=0)return++r,{type:g.Punctuator,value:f,lineNumber:y,lineStart:I,start:e,end:r};W({},o.UnexpectedToken,"ILLEGAL")}function X(e){for(var t="";r<u&&b(i[r]);)t+=i[r++];return t.length===0&&W({},o.UnexpectedToken,"ILLEGAL"),R(i.charCodeAt(r))&&W({},o.UnexpectedToken,"ILLEGAL"),{type:g.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:y,lineStart:I,start:e,end:r}}function Z(e){for(var t="0"+i[r++];r<u&&x(i[r]);)t+=i[r++];return(R(i.charCodeAt(r))||d(i.charCodeAt(r)))&&W({},o.UnexpectedToken,"ILLEGAL"),{type:g.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:y,lineStart:I,start:e,end:r}}function te(){var e,t;for(e=r+1;e<u;++e){if(t=i[e],t==="8"||t==="9")return!1;if(!x(t))return!0}return!0}function ue(){var e,t,a;if(a=i[r],h(d(a.charCodeAt(0))||a===".","Numeric literal must start with a decimal digit or a decimal point"),t=r,e="",a!=="."){if(e=i[r++],a=i[r],e==="0"){if(a==="x"||a==="X")return++r,X(t);if(x(a)&&te())return Z(t)}for(;d(i.charCodeAt(r));)e+=i[r++];a=i[r]}if(a==="."){for(e+=i[r++];d(i.charCodeAt(r));)e+=i[r++];a=i[r]}if(a==="e"||a==="E")if(e+=i[r++],a=i[r],(a==="+"||a==="-")&&(e+=i[r++]),d(i.charCodeAt(r)))for(;d(i.charCodeAt(r));)e+=i[r++];else W({},o.UnexpectedToken,"ILLEGAL");return R(i.charCodeAt(r))&&W({},o.UnexpectedToken,"ILLEGAL"),{type:g.NumericLiteral,value:parseFloat(e),lineNumber:y,lineStart:I,start:t,end:r}}function ve(){var e="",t,a,f,_,A,G,K=!1,le,ae;for(le=y,ae=I,t=i[r],h(t==="'"||t==='"',"String literal must starts with a quote"),a=r,++r;r<u;)if(f=i[r++],f===t){t="";break}else if(f==="\\")if(f=i[r++],!f||!L(f.charCodeAt(0)))switch(f){case"u":case"x":G=r,A=O(f),A?e+=A:(r=G,e+=f);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:x(f)?(_="01234567".indexOf(f),_!==0&&(K=!0),r<u&&x(i[r])&&(K=!0,_=_*8+"01234567".indexOf(i[r++]),"0123".indexOf(f)>=0&&r<u&&x(i[r])&&(_=_*8+"01234567".indexOf(i[r++]))),e+=String.fromCharCode(_)):e+=f;break}else++y,f==="\r"&&i[r]===`
`&&++r,I=r;else{if(L(f.charCodeAt(0)))break;e+=f}return t!==""&&W({},o.UnexpectedToken,"ILLEGAL"),{type:g.StringLiteral,value:e,octal:K,startLineNumber:le,startLineStart:ae,lineNumber:y,lineStart:I,start:a,end:r}}function Te(e,t){var a;try{a=new RegExp(e,t)}catch{W({},o.InvalidRegExp)}return a}function Ee(){var e,t,a,f,_;for(e=i[r],h(e==="/","Regular expression literal must start with a slash"),t=i[r++],a=!1,f=!1;r<u;)if(e=i[r++],t+=e,e==="\\")e=i[r++],L(e.charCodeAt(0))&&W({},o.UnterminatedRegExp),t+=e;else if(L(e.charCodeAt(0)))W({},o.UnterminatedRegExp);else if(a)e==="]"&&(a=!1);else if(e==="/"){f=!0;break}else e==="["&&(a=!0);return f||W({},o.UnterminatedRegExp),_=t.substr(1,t.length-2),{value:_,literal:t}}function Oe(){var e,t,a,f;for(t="",a="";r<u&&(e=i[r],!!$(e.charCodeAt(0)));)if(++r,e==="\\"&&r<u)if(e=i[r],e==="u"){if(++r,f=r,e=O("u"),e)for(a+=e,t+="\\u";f<r;++f)t+=i[f];else r=f,a+="u",t+="\\u";V({},o.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},o.UnexpectedToken,"ILLEGAL");else a+=e,t+=e;return{value:a,literal:t}}function Me(){var e,t,a,f;return s=null,E(),e=r,t=Ee(),a=Oe(),f=Te(t.value,a.value),p.tokenize?{type:g.RegularExpression,value:f,lineNumber:y,lineStart:I,start:e,end:r}:{literal:t.literal+a.literal,value:f,start:e,end:r}}function ye(){var e,t,a,f;return E(),e=r,t={start:{line:y,column:r-I}},a=Me(),t.end={line:y,column:r-I},p.tokenize||(p.tokens.length>0&&(f=p.tokens[p.tokens.length-1],f.range[0]===e&&f.type==="Punctuator"&&(f.value==="/"||f.value==="/=")&&p.tokens.pop()),p.tokens.push({type:"RegularExpression",value:a.literal,range:[e,r],loc:t})),a}function Qe(e){return e.type===g.Identifier||e.type===g.Keyword||e.type===g.BooleanLiteral||e.type===g.NullLiteral}function Ye(){var e,t;if(e=p.tokens[p.tokens.length-1],!e)return ye();if(e.type==="Punctuator"){if(e.value==="]")return j();if(e.value===")")return t=p.tokens[p.openParenToken-1],t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")?ye():j();if(e.value==="}"){if(p.tokens[p.openCurlyToken-3]&&p.tokens[p.openCurlyToken-3].type==="Keyword"){if(t=p.tokens[p.openCurlyToken-4],!t)return j()}else if(p.tokens[p.openCurlyToken-4]&&p.tokens[p.openCurlyToken-4].type==="Keyword"){if(t=p.tokens[p.openCurlyToken-5],!t)return ye()}else return j();return T.indexOf(t.value)>=0?j():ye()}return ye()}return e.type==="Keyword"&&e.value!=="this"?ye():j()}function Le(){var e;return E(),r>=u?{type:g.EOF,lineNumber:y,lineStart:I,start:r,end:r}:(e=i.charCodeAt(r),R(e)?ne():e===40||e===41||e===59?j():e===39||e===34?ve():e===46?d(i.charCodeAt(r+1))?ue():j():d(e)?ue():p.tokenize&&e===47?Ye():j())}function Fe(){var e,t,a;return E(),e={start:{line:y,column:r-I}},t=Le(),e.end={line:y,column:r-I},t.type!==g.EOF&&(a=i.slice(t.start,t.end),p.tokens.push({type:N[t.type],value:a,range:[t.start,t.end],loc:e})),t}function q(){var e;return e=s,r=e.end,y=e.lineNumber,I=e.lineStart,s=typeof p.tokens<"u"?Fe():Le(),r=e.end,y=e.lineNumber,I=e.lineStart,e}function Ne(){var e,t,a;e=r,t=y,a=I,s=typeof p.tokens<"u"?Fe():Le(),r=e,y=t,I=a}function Be(e,t){this.line=e,this.column=t}function Ze(e,t,a,f){this.start=new Be(e,t),this.end=new Be(a,f)}l={name:"SyntaxTree",processComment:function(e){var t,a;if(!(e.type===S.Program&&e.body.length>0)){for(p.trailingComments.length>0?p.trailingComments[0].range[0]>=e.range[1]?(a=p.trailingComments,p.trailingComments=[]):p.trailingComments.length=0:p.bottomRightStack.length>0&&p.bottomRightStack[p.bottomRightStack.length-1].trailingComments&&p.bottomRightStack[p.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(a=p.bottomRightStack[p.bottomRightStack.length-1].trailingComments,delete p.bottomRightStack[p.bottomRightStack.length-1].trailingComments);p.bottomRightStack.length>0&&p.bottomRightStack[p.bottomRightStack.length-1].range[0]>=e.range[0];)t=p.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):p.leadingComments.length>0&&p.leadingComments[p.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=p.leadingComments,p.leadingComments=[]),a&&(e.trailingComments=a),p.bottomRightStack.push(e)}},markEnd:function(e,t){return p.range&&(e.range=[t.start,r]),p.loc&&(e.loc=new Ze(t.startLineNumber===void 0?t.lineNumber:t.startLineNumber,t.start-(t.startLineStart===void 0?t.lineStart:t.startLineStart),y,r-I),this.postProcess(e)),p.attachComment&&this.processComment(e),e},postProcess:function(e){return p.source&&(e.loc.source=p.source),e},createArrayExpression:function(e){return{type:S.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,a){return{type:S.AssignmentExpression,operator:e,left:t,right:a}},createBinaryExpression:function(e,t,a){var f=e==="||"||e==="&&"?S.LogicalExpression:S.BinaryExpression;return{type:f,operator:e,left:t,right:a}},createBlockStatement:function(e){return{type:S.BlockStatement,body:e}},createBreakStatement:function(e){return{type:S.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:S.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:S.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,a){return{type:S.ConditionalExpression,test:e,consequent:t,alternate:a}},createContinueStatement:function(e){return{type:S.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:S.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:S.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:S.EmptyStatement}},createExpressionStatement:function(e){return{type:S.ExpressionStatement,expression:e}},createForStatement:function(e,t,a,f){return{type:S.ForStatement,init:e,test:t,update:a,body:f}},createForInStatement:function(e,t,a){return{type:S.ForInStatement,left:e,right:t,body:a,each:!1}},createFunctionDeclaration:function(e,t,a,f){return{type:S.FunctionDeclaration,id:e,params:t,defaults:a,body:f,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,a,f){return{type:S.FunctionExpression,id:e,params:t,defaults:a,body:f,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:S.Identifier,name:e}},createIfStatement:function(e,t,a){return{type:S.IfStatement,test:e,consequent:t,alternate:a}},createLabeledStatement:function(e,t){return{type:S.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:S.Literal,value:e.value,raw:i.slice(e.start,e.end)}},createMemberExpression:function(e,t,a){return{type:S.MemberExpression,computed:e==="[",object:t,property:a}},createNewExpression:function(e,t){return{type:S.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:S.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:S.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:S.Program,body:e}},createProperty:function(e,t,a){return{type:S.Property,key:t,value:a,kind:e}},createReturnStatement:function(e){return{type:S.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:S.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:S.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:S.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:S.ThisExpression}},createThrowStatement:function(e){return{type:S.ThrowStatement,argument:e}},createTryStatement:function(e,t,a,f){return{type:S.TryStatement,block:e,guardedHandlers:t,handlers:a,finalizer:f}},createUnaryExpression:function(e,t){return e==="++"||e==="--"?{type:S.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:S.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:S.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:S.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:S.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:S.WithStatement,object:e,body:t}}};function be(){var e,t,a,f;return e=r,t=y,a=I,E(),f=y!==t,r=e,y=t,I=a,f}function W(e,t){var a,f=Array.prototype.slice.call(arguments,2),_=t.replace(/%(\d)/g,function(A,G){return h(G<f.length,"Message reference must be in range"),f[G]});throw typeof e.lineNumber=="number"?(a=new Error("Line "+e.lineNumber+": "+_),a.index=e.start,a.lineNumber=e.lineNumber,a.column=e.start-I+1):(a=new Error("Line "+y+": "+_),a.index=r,a.lineNumber=y,a.column=r-I+1),a.description=_,a}function V(){try{W.apply(null,arguments)}catch(e){if(p.errors)p.errors.push(e);else throw e}}function pe(e){if(e.type===g.EOF&&W(e,o.UnexpectedEOS),e.type===g.NumericLiteral&&W(e,o.UnexpectedNumber),e.type===g.StringLiteral&&W(e,o.UnexpectedString),e.type===g.Identifier&&W(e,o.UnexpectedIdentifier),e.type===g.Keyword){if(J(e.value))W(e,o.UnexpectedReserved);else if(c&&H(e.value)){V(e,o.StrictReservedWord);return}W(e,o.UnexpectedToken,e.value)}W(e,o.UnexpectedToken,e.value)}function U(e){var t=q();(t.type!==g.Punctuator||t.value!==e)&&pe(t)}function re(e){var t=q();(t.type!==g.Keyword||t.value!==e)&&pe(t)}function B(e){return s.type===g.Punctuator&&s.value===e}function oe(e){return s.type===g.Keyword&&s.value===e}function et(){var e;return s.type!==g.Punctuator?!1:(e=s.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function he(){var e,t=r,a=y,f=I,_=s;if(i.charCodeAt(r)===59||B(";")){q();return}if(e=y,E(),y!==e){r=t,y=a,I=f,s=_;return}s.type!==g.EOF&&!B("}")&&pe(s)}function _e(e){return e.type===S.Identifier||e.type===S.MemberExpression}function tt(){var e=[],t;for(t=s,U("[");!B("]");)B(",")?(q(),e.push(null)):(e.push(ce()),B("]")||U(","));return q(),n.markEnd(n.createArrayExpression(e),t)}function Ae(e,t){var a,f,_;return a=c,_=s,f=Re(),t&&c&&z(e[0].name)&&V(t,o.StrictParamName),c=a,n.markEnd(n.createFunctionExpression(null,e,[],f),_)}function we(){var e,t;return t=s,e=q(),e.type===g.StringLiteral||e.type===g.NumericLiteral?(c&&e.octal&&V(e,o.StrictOctalLiteral),n.markEnd(n.createLiteral(e),t)):n.markEnd(n.createIdentifier(e.value),t)}function rt(){var e,t,a,f,_,A;if(e=s,A=s,e.type===g.Identifier)return a=we(),e.value==="get"&&!B(":")?(t=we(),U("("),U(")"),f=Ae([]),n.markEnd(n.createProperty("get",t,f),A)):e.value==="set"&&!B(":")?(t=we(),U("("),e=s,e.type!==g.Identifier?(U(")"),V(e,o.UnexpectedToken,e.value),f=Ae([])):(_=[de()],U(")"),f=Ae(_,e)),n.markEnd(n.createProperty("set",t,f),A)):(U(":"),f=ce(),n.markEnd(n.createProperty("init",a,f),A));if(e.type===g.EOF||e.type===g.Punctuator)pe(e);else return t=we(),U(":"),f=ce(),n.markEnd(n.createProperty("init",t,f),A)}function nt(){var e=[],t,a,f,_,A={},G=String,K;for(K=s,U("{");!B("}");)t=rt(),t.key.type===S.Identifier?a=t.key.name:a=G(t.key.value),_=t.kind==="init"?w.Data:t.kind==="get"?w.Get:w.Set,f="$"+a,Object.prototype.hasOwnProperty.call(A,f)?(A[f]===w.Data?c&&_===w.Data?V({},o.StrictDuplicateProperty):_!==w.Data&&V({},o.AccessorDataProperty):_===w.Data?V({},o.AccessorDataProperty):A[f]&_&&V({},o.AccessorGetSet),A[f]|=_):A[f]=_,e.push(t),B("}")||U(",");return U("}"),n.markEnd(n.createObjectExpression(e),K)}function it(){var e;return U("("),e=ie(),U(")"),e}function Ue(){var e,t,a,f;if(B("("))return it();if(B("["))return tt();if(B("{"))return nt();if(e=s.type,f=s,e===g.Identifier)a=n.createIdentifier(q().value);else if(e===g.StringLiteral||e===g.NumericLiteral)c&&s.octal&&V(s,o.StrictOctalLiteral),a=n.createLiteral(q());else if(e===g.Keyword){if(oe("function"))return Nt();oe("this")?(q(),a=n.createThisExpression()):pe(q())}else e===g.BooleanLiteral?(t=q(),t.value=t.value==="true",a=n.createLiteral(t)):e===g.NullLiteral?(t=q(),t.value=null,a=n.createLiteral(t)):B("/")||B("/=")?(typeof p.tokens<"u"?a=n.createLiteral(ye()):a=n.createLiteral(Me()),Ne()):pe(q());return n.markEnd(a,f)}function $e(){var e=[];if(U("("),!B(")"))for(;r<u&&(e.push(ce()),!B(")"));)U(",");return U(")"),e}function at(){var e,t;return t=s,e=q(),Qe(e)||pe(e),n.markEnd(n.createIdentifier(e.value),t)}function qe(){return U("."),at()}function We(){var e;return U("["),e=ie(),U("]"),e}function Ge(){var e,t,a;return a=s,re("new"),e=ot(),t=B("(")?$e():[],n.markEnd(n.createNewExpression(e,t),a)}function st(){var e,t,a,f,_=m.allowIn;for(f=s,m.allowIn=!0,e=oe("new")?Ge():Ue();;){if(B("."))a=qe(),e=n.createMemberExpression(".",e,a);else if(B("("))t=$e(),e=n.createCallExpression(e,t);else if(B("["))a=We(),e=n.createMemberExpression("[",e,a);else break;n.markEnd(e,f)}return m.allowIn=_,e}function ot(){var e,t,a;for(h(m.allowIn,"callee of new expression always allow in keyword."),a=s,e=oe("new")?Ge():Ue();B(".")||B("[");)B("[")?(t=We(),e=n.createMemberExpression("[",e,t)):(t=qe(),e=n.createMemberExpression(".",e,t)),n.markEnd(e,a);return e}function ze(){var e,t,a=s;return e=st(),s.type===g.Punctuator&&(B("++")||B("--"))&&!be()&&(c&&e.type===S.Identifier&&z(e.name)&&V({},o.StrictLHSPostfix),_e(e)||V({},o.InvalidLHSInAssignment),t=q(),e=n.markEnd(n.createPostfixExpression(t.value,e),a)),e}function Se(){var e,t,a;return s.type!==g.Punctuator&&s.type!==g.Keyword?t=ze():B("++")||B("--")?(a=s,e=q(),t=Se(),c&&t.type===S.Identifier&&z(t.name)&&V({},o.StrictLHSPrefix),_e(t)||V({},o.InvalidLHSInAssignment),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,a)):B("+")||B("-")||B("~")||B("!")?(a=s,e=q(),t=Se(),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,a)):oe("delete")||oe("void")||oe("typeof")?(a=s,e=q(),t=Se(),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,a),c&&t.operator==="delete"&&t.argument.type===S.Identifier&&V({},o.StrictDelete)):t=ze(),t}function He(e,t){var a=0;if(e.type!==g.Punctuator&&e.type!==g.Keyword)return 0;switch(e.value){case"||":a=1;break;case"&&":a=2;break;case"|":a=3;break;case"^":a=4;break;case"&":a=5;break;case"==":case"!=":case"===":case"!==":a=6;break;case"<":case">":case"<=":case">=":case"instanceof":a=7;break;case"in":a=t?7:0;break;case"<<":case">>":case">>>":a=8;break;case"+":case"-":a=9;break;case"*":case"/":case"%":a=11;break}return a}function lt(){var e,t,a,f,_,A,G,K,le,ae;if(e=s,le=Se(),f=s,_=He(f,m.allowIn),_===0)return le;for(f.prec=_,q(),t=[e,s],G=Se(),A=[le,f,G];(_=He(s,m.allowIn))>0;){for(;A.length>2&&_<=A[A.length-2].prec;)G=A.pop(),K=A.pop().value,le=A.pop(),a=n.createBinaryExpression(K,le,G),t.pop(),e=t[t.length-1],n.markEnd(a,e),A.push(a);f=q(),f.prec=_,A.push(f),t.push(s),a=Se(),A.push(a)}for(ae=A.length-1,a=A[ae],t.pop();ae>1;)a=n.createBinaryExpression(A[ae-1].value,A[ae-2],a),ae-=2,e=t.pop(),n.markEnd(a,e);return a}function ut(){var e,t,a,f,_;return _=s,e=lt(),B("?")&&(q(),t=m.allowIn,m.allowIn=!0,a=ce(),m.allowIn=t,U(":"),f=ce(),e=n.createConditionalExpression(e,a,f),n.markEnd(e,_)),e}function ce(){var e,t,a,f,_;return e=s,_=s,f=t=ut(),et()&&(_e(t)||V({},o.InvalidLHSInAssignment),c&&t.type===S.Identifier&&z(t.name)&&V(e,o.StrictLHSAssignment),e=q(),a=ce(),f=n.markEnd(n.createAssignmentExpression(e.value,t,a),_)),f}function ie(){var e,t=s;if(e=ce(),B(",")){for(e=n.createSequenceExpression([e]);r<u&&B(",");)q(),e.expressions.push(ce());n.markEnd(e,t)}return e}function ct(){for(var e=[],t;r<u&&!(B("}")||(t=ke(),typeof t>"u"));)e.push(t);return e}function Ie(){var e,t;return t=s,U("{"),e=ct(),U("}"),n.markEnd(n.createBlockStatement(e),t)}function de(){var e,t;return t=s,e=q(),e.type!==g.Identifier&&pe(e),n.markEnd(n.createIdentifier(e.value),t)}function ft(e){var t=null,a,f;return f=s,a=de(),c&&z(a.name)&&V({},o.StrictVarName),e==="const"?(U("="),t=ce()):B("=")&&(q(),t=ce()),n.markEnd(n.createVariableDeclarator(a,t),f)}function Pe(e){var t=[];do{if(t.push(ft(e)),!B(","))break;q()}while(r<u);return t}function pt(){var e;return re("var"),e=Pe(),he(),n.createVariableDeclaration(e,"var")}function ht(e){var t,a;return a=s,re(e),t=Pe(e),he(),n.markEnd(n.createVariableDeclaration(t,e),a)}function mt(){return U(";"),n.createEmptyStatement()}function dt(){var e=ie();return he(),n.createExpressionStatement(e)}function yt(){var e,t,a;return re("if"),U("("),e=ie(),U(")"),t=me(),oe("else")?(q(),a=me()):a=null,n.createIfStatement(e,t,a)}function gt(){var e,t,a;return re("do"),a=m.inIteration,m.inIteration=!0,e=me(),m.inIteration=a,re("while"),U("("),t=ie(),U(")"),B(";")&&q(),n.createDoWhileStatement(e,t)}function vt(){var e,t,a;return re("while"),U("("),e=ie(),U(")"),a=m.inIteration,m.inIteration=!0,t=me(),m.inIteration=a,n.createWhileStatement(e,t)}function St(){var e,t,a;return a=s,e=q(),t=Pe(),n.markEnd(n.createVariableDeclaration(t,e.value),a)}function Et(){var e,t,a,f,_,A,G,K=m.allowIn;return e=t=a=null,re("for"),U("("),B(";")?q():(oe("var")||oe("let")?(m.allowIn=!1,e=St(),m.allowIn=K,e.declarations.length===1&&oe("in")&&(q(),f=e,_=ie(),e=null)):(m.allowIn=!1,e=ie(),m.allowIn=K,oe("in")&&(_e(e)||V({},o.InvalidLHSInForIn),q(),f=e,_=ie(),e=null)),typeof f>"u"&&U(";")),typeof f>"u"&&(B(";")||(t=ie()),U(";"),B(")")||(a=ie())),U(")"),G=m.inIteration,m.inIteration=!0,A=me(),m.inIteration=G,typeof f>"u"?n.createForStatement(e,t,a,A):n.createForInStatement(f,_,A)}function bt(){var e=null,t;return re("continue"),i.charCodeAt(r)===59?(q(),m.inIteration||W({},o.IllegalContinue),n.createContinueStatement(null)):be()?(m.inIteration||W({},o.IllegalContinue),n.createContinueStatement(null)):(s.type===g.Identifier&&(e=de(),t="$"+e.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||W({},o.UnknownLabel,e.name)),he(),e===null&&!m.inIteration&&W({},o.IllegalContinue),n.createContinueStatement(e))}function kt(){var e=null,t;return re("break"),i.charCodeAt(r)===59?(q(),m.inIteration||m.inSwitch||W({},o.IllegalBreak),n.createBreakStatement(null)):be()?(m.inIteration||m.inSwitch||W({},o.IllegalBreak),n.createBreakStatement(null)):(s.type===g.Identifier&&(e=de(),t="$"+e.name,Object.prototype.hasOwnProperty.call(m.labelSet,t)||W({},o.UnknownLabel,e.name)),he(),e===null&&!(m.inIteration||m.inSwitch)&&W({},o.IllegalBreak),n.createBreakStatement(e))}function xt(){var e=null;return re("return"),m.inFunctionBody||V({},o.IllegalReturn),i.charCodeAt(r)===32&&R(i.charCodeAt(r+1))?(e=ie(),he(),n.createReturnStatement(e)):be()?n.createReturnStatement(null):(B(";")||!B("}")&&s.type!==g.EOF&&(e=ie()),he(),n.createReturnStatement(e))}function _t(){var e,t;return c&&(E(),V({},o.StrictModeWith)),re("with"),U("("),e=ie(),U(")"),t=me(),n.createWithStatement(e,t)}function wt(){var e,t=[],a,f;for(f=s,oe("default")?(q(),e=null):(re("case"),e=ie()),U(":");r<u&&!(B("}")||oe("default")||oe("case"));)a=me(),t.push(a);return n.markEnd(n.createSwitchCase(e,t),f)}function It(){var e,t,a,f,_;if(re("switch"),U("("),e=ie(),U(")"),U("{"),t=[],B("}"))return q(),n.createSwitchStatement(e,t);for(f=m.inSwitch,m.inSwitch=!0,_=!1;r<u&&!B("}");)a=wt(),a.test===null&&(_&&W({},o.MultipleDefaultsInSwitch),_=!0),t.push(a);return m.inSwitch=f,U("}"),n.createSwitchStatement(e,t)}function Ct(){var e;return re("throw"),be()&&W({},o.NewlineAfterThrow),e=ie(),he(),n.createThrowStatement(e)}function Tt(){var e,t,a;return a=s,re("catch"),U("("),B(")")&&pe(s),e=de(),c&&z(e.name)&&V({},o.StrictCatchVariable),U(")"),t=Ie(),n.markEnd(n.createCatchClause(e,t),a)}function Ot(){var e,t=[],a=null;return re("try"),e=Ie(),oe("catch")&&t.push(Tt()),oe("finally")&&(q(),a=Ie()),t.length===0&&!a&&W({},o.NoCatchOrFinally),n.createTryStatement(e,[],t,a)}function Lt(){return re("debugger"),he(),n.createDebuggerStatement()}function me(){var e=s.type,t,a,f,_;if(e===g.EOF&&pe(s),e===g.Punctuator&&s.value==="{")return Ie();if(_=s,e===g.Punctuator)switch(s.value){case";":return n.markEnd(mt(),_);case"(":return n.markEnd(dt(),_)}if(e===g.Keyword)switch(s.value){case"break":return n.markEnd(kt(),_);case"continue":return n.markEnd(bt(),_);case"debugger":return n.markEnd(Lt(),_);case"do":return n.markEnd(gt(),_);case"for":return n.markEnd(Et(),_);case"function":return n.markEnd(Ke(),_);case"if":return n.markEnd(yt(),_);case"return":return n.markEnd(xt(),_);case"switch":return n.markEnd(It(),_);case"throw":return n.markEnd(Ct(),_);case"try":return n.markEnd(Ot(),_);case"var":return n.markEnd(pt(),_);case"while":return n.markEnd(vt(),_);case"with":return n.markEnd(_t(),_)}return t=ie(),t.type===S.Identifier&&B(":")?(q(),f="$"+t.name,Object.prototype.hasOwnProperty.call(m.labelSet,f)&&W({},o.Redeclaration,"Label",t.name),m.labelSet[f]=!0,a=me(),delete m.labelSet[f],n.markEnd(n.createLabeledStatement(t,a),_)):(he(),n.markEnd(n.createExpressionStatement(t),_))}function Re(){var e,t=[],a,f,_,A,G,K,le,ae;for(ae=s,U("{");r<u&&!(s.type!==g.StringLiteral||(a=s,e=ke(),t.push(e),e.expression.type!==S.Literal));)f=i.slice(a.start+1,a.end-1),f==="use strict"?(c=!0,_&&V(_,o.StrictOctalLiteral)):!_&&a.octal&&(_=a);for(A=m.labelSet,G=m.inIteration,K=m.inSwitch,le=m.inFunctionBody,m.labelSet={},m.inIteration=!1,m.inSwitch=!1,m.inFunctionBody=!0;r<u&&!(B("}")||(e=ke(),typeof e>"u"));)t.push(e);return U("}"),m.labelSet=A,m.inIteration=G,m.inSwitch=K,m.inFunctionBody=le,n.markEnd(n.createBlockStatement(t),ae)}function je(e){var t,a=[],f,_,A,G,K;if(U("("),!B(")"))for(A={};r<u&&(f=s,t=de(),G="$"+f.value,c?(z(f.value)&&(_=f,K=o.StrictParamName),Object.prototype.hasOwnProperty.call(A,G)&&(_=f,K=o.StrictParamDupe)):e||(z(f.value)?(e=f,K=o.StrictParamName):H(f.value)?(e=f,K=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(A,G)&&(e=f,K=o.StrictParamDupe)),a.push(t),A[G]=!0,!B(")"));)U(",");return U(")"),{params:a,stricted:_,firstRestricted:e,message:K}}function Ke(){var e,t=[],a,f,_,A,G,K,le,ae;return ae=s,re("function"),f=s,e=de(),c?z(f.value)&&V(f,o.StrictFunctionName):z(f.value)?(G=f,K=o.StrictFunctionName):H(f.value)&&(G=f,K=o.StrictReservedWord),A=je(G),t=A.params,_=A.stricted,G=A.firstRestricted,A.message&&(K=A.message),le=c,a=Re(),c&&G&&W(G,K),c&&_&&V(_,K),c=le,n.markEnd(n.createFunctionDeclaration(e,t,[],a),ae)}function Nt(){var e,t=null,a,f,_,A,G=[],K,le,ae;return ae=s,re("function"),B("(")||(e=s,t=de(),c?z(e.value)&&V(e,o.StrictFunctionName):z(e.value)?(f=e,_=o.StrictFunctionName):H(e.value)&&(f=e,_=o.StrictReservedWord)),A=je(f),G=A.params,a=A.stricted,f=A.firstRestricted,A.message&&(_=A.message),le=c,K=Re(),c&&f&&W(f,_),c&&a&&V(a,_),c=le,n.markEnd(n.createFunctionExpression(t,G,[],K),ae)}function ke(){if(s.type===g.Keyword)switch(s.value){case"const":case"let":return ht(s.value);case"function":return Ke();default:return me()}if(s.type!==g.EOF)return me()}function At(){for(var e,t=[],a,f,_;r<u&&(a=s,!(a.type!==g.StringLiteral||(e=ke(),t.push(e),e.expression.type!==S.Literal)));)f=i.slice(a.start+1,a.end-1),f==="use strict"?(c=!0,_&&V(_,o.StrictOctalLiteral)):!_&&a.octal&&(_=a);for(;r<u&&(e=ke(),!(typeof e>"u"));)t.push(e);return t}function Pt(){var e,t;return E(),Ne(),t=s,c=!1,e=At(),n.markEnd(n.createProgram(e),t)}function Xe(){var e,t,a,f=[];for(e=0;e<p.tokens.length;++e)t=p.tokens[e],a={type:t.type,value:t.value},p.range&&(a.range=t.range),p.loc&&(a.loc=t.loc),f.push(a);p.tokens=f}function Rt(e,t){var a,f,_;a=String,typeof e!="string"&&!(e instanceof String)&&(e=a(e)),n=l,i=e,r=0,y=i.length>0?1:0,I=0,u=i.length,s=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},t=t||{},t.tokens=!0,p.tokens=[],p.tokenize=!0,p.openParenToken=-1,p.openCurlyToken=-1,p.range=typeof t.range=="boolean"&&t.range,p.loc=typeof t.loc=="boolean"&&t.loc,typeof t.comment=="boolean"&&t.comment&&(p.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(p.errors=[]);try{if(Ne(),s.type===g.EOF)return p.tokens;for(f=q();s.type!==g.EOF;)try{f=q()}catch(A){if(f=s,p.errors){p.errors.push(A);break}else throw A}Xe(),_=p.tokens,typeof p.comments<"u"&&(_.comments=p.comments),typeof p.errors<"u"&&(_.errors=p.errors)}catch(A){throw A}finally{p={}}return _}function Dt(e,t){var a,f;f=String,typeof e!="string"&&!(e instanceof String)&&(e=f(e)),n=l,i=e,r=0,y=i.length>0?1:0,I=0,u=i.length,s=null,m={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},p={},typeof t<"u"&&(p.range=typeof t.range=="boolean"&&t.range,p.loc=typeof t.loc=="boolean"&&t.loc,p.attachComment=typeof t.attachComment=="boolean"&&t.attachComment,p.loc&&t.source!==null&&t.source!==void 0&&(p.source=f(t.source)),typeof t.tokens=="boolean"&&t.tokens&&(p.tokens=[]),typeof t.comment=="boolean"&&t.comment&&(p.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(p.errors=[]),p.attachComment&&(p.range=!0,p.comments=[],p.bottomRightStack=[],p.trailingComments=[],p.leadingComments=[]));try{a=Pt(),typeof p.comments<"u"&&(a.comments=p.comments),typeof p.tokens<"u"&&(Xe(),a.tokens=p.tokens),typeof p.errors<"u"&&(a.errors=p.errors)}catch(_){throw _}finally{p={}}return a}C.version="1.2.5",C.tokenize=Rt,C.parse=Dt,C.Syntax=(function(){var e,t={};typeof Object.create=="function"&&(t=Object.create(null));for(e in S)S.hasOwnProperty(e)&&(t[e]=S[e]);return typeof Object.freeze=="function"&&Object.freeze(t),t})()})},{}],1:[function(F,D,P){(function(C){var g=(function(){var N={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(v,l,i,c,r,y,I){c.ast||(c.ast=T,T.initialize());var u=y.length-1;switch(r){case 1:return c.ast.set({expression:{type:"root",value:y[u]}}),c.ast.unshift(),c.ast.yield();case 2:return c.ast.set({expression:{type:"root",value:y[u-1]}}),c.ast.unshift(),c.ast.yield();case 3:return c.ast.unshift(),c.ast.yield();case 4:return c.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:y[u-1]}}),c.ast.unshift(),c.ast.yield();case 5:break;case 6:break;case 7:c.ast.set({operation:"member"}),c.ast.push();break;case 8:c.ast.set({operation:"subscript"}),c.ast.push();break;case 9:c.ast.set({scope:"child"});break;case 10:c.ast.set({scope:"descendant"});break;case 11:break;case 12:c.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:c.ast.set({expression:{type:"wildcard",value:y[u]}});break;case 15:c.ast.set({expression:{type:"identifier",value:y[u]}});break;case 16:c.ast.set({expression:{type:"script_expression",value:y[u]}});break;case 17:c.ast.set({expression:{type:"numeric_literal",value:parseInt(y[u])}});break;case 18:break;case 19:c.ast.set({scope:"child"});break;case 20:c.ast.set({scope:"descendant"});break;case 21:break;case 22:break;case 23:break;case 24:y[u].length>1?c.ast.set({expression:{type:"union",value:y[u]}}):this.$=y[u];break;case 25:this.$=[y[u]];break;case 26:this.$=y[u-2].concat(y[u]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(y[u])}},c.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:y[u]}},c.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:y[u]}},c.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:y[u]}},c.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:y[u]}},c.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:y[u]}},c.ast.set(this.$);break;case 33:this.$=y[u];break;case 34:this.$=y[u];break}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(v,l){if(l.recoverable)this.trace(v);else throw new Error(v)},parse:function(v){var l=this,i=[0],c=[null],r=[],y=this.table,I="",u=0,n=0,s=2,m=1,p=r.slice.call(arguments,1);this.lexer.setInput(v),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function b(){var Q;return Q=l.lexer.lex()||m,typeof Q!="number"&&(Q=l.symbols_[Q]||Q),Q}for(var x,k,L,R,$={},J,H,z,ee;;){if(k=i[i.length-1],this.defaultActions[k]?L=this.defaultActions[k]:((x===null||typeof x>"u")&&(x=b()),L=y[k]&&y[k][x]),typeof L>"u"||!L.length||!L[0]){var se="";ee=[];for(J in y[k])this.terminals_[J]&&J>s&&ee.push("'"+this.terminals_[J]+"'");this.lexer.showPosition?se="Parse error on line "+(u+1)+`:
`+this.lexer.showPosition()+`
Expecting `+ee.join(", ")+", got '"+(this.terminals_[x]||x)+"'":se="Parse error on line "+(u+1)+": Unexpected "+(x==m?"end of input":"'"+(this.terminals_[x]||x)+"'"),this.parseError(se,{text:this.lexer.match,token:this.terminals_[x]||x,line:this.lexer.yylineno,loc:h,expected:ee})}if(L[0]instanceof Array&&L.length>1)throw new Error("Parse Error: multiple actions possible at state: "+k+", token: "+x);switch(L[0]){case 1:i.push(x),c.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(L[1]),x=null,n=this.lexer.yyleng,I=this.lexer.yytext,u=this.lexer.yylineno,h=this.lexer.yylloc;break;case 2:if(H=this.productions_[L[1]][1],$.$=c[c.length-H],$._$={first_line:r[r.length-(H||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(H||1)].first_column,last_column:r[r.length-1].last_column},d&&($._$.range=[r[r.length-(H||1)].range[0],r[r.length-1].range[1]]),R=this.performAction.apply($,[I,n,u,this.yy,L[1],c,r].concat(p)),typeof R<"u")return R;H&&(i=i.slice(0,-1*H*2),c=c.slice(0,-1*H),r=r.slice(0,-1*H)),i.push(this.productions_[L[1]][0]),c.push($.$),r.push($._$),z=y[i[i.length-2]][i[i.length-1]],i.push(z);break;case 3:return!0}}return!0}},T={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(o){for(var v in o)this._node[v]=o[v];return this._node},node:function(o){return arguments.length&&(this._node=o),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var o=this._nodes;return this.initialize(),o}},S=(function(){var o={EOF:1,parseError:function(l,i){if(this.yy.parser)this.yy.parser.parseError(l,i);else throw new Error(l)},setInput:function(v){return this._input=v,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var v=this._input[0];this.yytext+=v,this.yyleng++,this.offset++,this.match+=v,this.matched+=v;var l=v.match(/(?:\r\n?|\n).*/g);return l?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),v},unput:function(v){var l=v.length,i=v.split(/(?:\r\n?|\n)/g);this._input=v+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-l-1),this.offset-=l;var c=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===c.length?this.yylloc.first_column:0)+c[c.length-i.length].length-i[0].length:this.yylloc.first_column-l},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-l]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(v){this.unput(this.match.slice(v))},pastInput:function(){var v=this.matched.substr(0,this.matched.length-this.match.length);return(v.length>20?"...":"")+v.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var v=this.match;return v.length<20&&(v+=this._input.substr(0,20-v.length)),(v.substr(0,20)+(v.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var v=this.pastInput(),l=new Array(v.length+1).join("-");return v+this.upcomingInput()+`
`+l+"^"},test_match:function(v,l){var i,c,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),c=v[0].match(/(?:\r\n?|\n).*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+v[0].length},this.yytext+=v[0],this.match+=v[0],this.matches=v,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(v[0].length),this.matched+=v[0],i=this.performAction.call(this,this.yy,this,l,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var y in r)this[y]=r[y];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var v,l,i,c;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),y=0;y<r.length;y++)if(i=this._input.match(this.rules[r[y]]),i&&(!l||i[0].length>l[0].length)){if(l=i,c=y,this.options.backtrack_lexer){if(v=this.test_match(i,r[y]),v!==!1)return v;if(this._backtrack){l=!1;continue}else return!1}else if(!this.options.flex)break}return l?(v=this.test_match(l,r[c]),v!==!1?v:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var l=this.next();return l||this.lex()},begin:function(l){this.conditionStack.push(l)},popState:function(){var l=this.conditionStack.length-1;return l>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(l){return l=this.conditionStack.length-1-Math.abs(l||0),l>=0?this.conditionStack[l]:"INITIAL"},pushState:function(l){this.begin(l)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(l,i,c,r){switch(c){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return i.yytext=i.yytext.substr(1,i.yyleng-2),32;case 11:return i.yytext=i.yytext.substr(1,i.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return o})();N.lexer=S;function w(){this.yy={}}return w.prototype=N,N.Parser=w,new w})();typeof F<"u"&&typeof P<"u"&&(P.parser=g,P.Parser=g.Parser,P.parse=function(){return g.parse.apply(g,arguments)},P.main=function(T){T[1]||(console.log("Usage: "+T[0]+" FILE"),C.exit(1));var S=F("fs").readFileSync(F("path").normalize(T[1]),"utf8");return P.parser.parse(S)},typeof D<"u"&&F.main===D&&P.main(C.argv.slice(1)))}).call(this,F("_process"))},{_process:14,fs:12,path:13}],2:[function(F,D,P){D.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(F,D,P){var C=F("./dict"),g=F("fs"),N={lex:{macros:{esc:"\\\\",int:C.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[C.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[C.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[C.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};g.readFileSync&&(N.moduleInclude=g.readFileSync(F.resolve("../include/module.js")),N.actionInclude=g.readFileSync(F.resolve("../include/action.js"))),D.exports=N},{"./dict":2,fs:12}],4:[function(F,D,P){var C=F("./aesprim"),g=F("./slice"),N=F("static-eval"),T=F("underscore").uniq,S=function(){return this.initialize.apply(this,arguments)};S.prototype.initialize=function(){this.traverse=l(!0),this.descend=l()},S.prototype.keys=Object.keys,S.prototype.resolve=function(u){var n=[u.operation,u.scope,u.expression.type].join("-"),s=this._fns[n];if(!s)throw new Error("couldn't resolve key: "+n);return s.bind(this)},S.prototype.register=function(u,n){if(!n instanceof Function)throw new Error("handler must be a function");this._fns[u]=n},S.prototype._fns={"member-child-identifier":function(u,n){var s=u.expression.value,m=n.value;if(m instanceof Object&&s in m)return[{value:m[s],path:n.path.concat(s)}]},"member-descendant-identifier":c(function(u,n,s){return u==s}),"subscript-child-numeric_literal":i(function(u,n,s){return u===s}),"member-child-numeric_literal":i(function(u,n,s){return String(u)===String(s)}),"subscript-descendant-numeric_literal":c(function(u,n,s){return u===s}),"member-child-wildcard":i(function(){return!0}),"member-descendant-wildcard":c(function(){return!0}),"subscript-descendant-wildcard":c(function(){return!0}),"subscript-child-wildcard":i(function(){return!0}),"subscript-child-slice":function(u,n){if(o(n.value)){var s=u.expression.value.split(":").map(I),m=n.value.map(function(p,h){return{value:p,path:n.path.concat(h)}});return g.apply(null,[m].concat(s))}},"subscript-child-union":function(u,n){var s=[];return u.expression.value.forEach(function(m){var p={operation:"subscript",scope:"child",expression:m.expression},h=this.resolve(p),d=h(p,n);d&&(s=s.concat(d))},this),y(s)},"subscript-descendant-union":function(u,n,s){var m=F(".."),p=this,h=[],d=m.nodes(n,"$..*").slice(1);return d.forEach(function(b){h.length>=s||u.expression.value.forEach(function(x){var k={operation:"subscript",scope:"child",expression:x.expression},L=p.resolve(k),R=L(k,b);h=h.concat(R)})}),y(h)},"subscript-child-filter_expression":function(u,n,s){var m=u.expression.value.slice(2,-1),p=C.parse(m).body[0].expression,h=function(d,b){return r(p,{"@":b})};return this.descend(n,null,h,s)},"subscript-descendant-filter_expression":function(u,n,s){var m=u.expression.value.slice(2,-1),p=C.parse(m).body[0].expression,h=function(d,b){return r(p,{"@":b})};return this.traverse(n,null,h,s)},"subscript-child-script_expression":function(u,n){var s=u.expression.value.slice(1,-1);return w(n,s,"$[{{value}}]")},"member-child-script_expression":function(u,n){var s=u.expression.value.slice(1,-1);return w(n,s,"$.{{value}}")},"member-descendant-script_expression":function(u,n){var s=u.expression.value.slice(1,-1);return w(n,s,"$..value")}},S.prototype._fns["subscript-child-string_literal"]=S.prototype._fns["member-child-identifier"],S.prototype._fns["member-descendant-numeric_literal"]=S.prototype._fns["subscript-descendant-string_literal"]=S.prototype._fns["member-descendant-identifier"];function w(u,n,s){var m=F("./index"),p=C.parse(n).body[0].expression,h=r(p,{"@":u.value}),d=s.replace(/\{\{\s*value\s*\}\}/g,h),b=m.nodes(u.value,d);return b.forEach(function(x){x.path=u.path.concat(x.path.slice(1))}),b}function o(u){return Array.isArray(u)}function v(u){return u&&!(u instanceof Array)&&u instanceof Object}function l(u){return function(n,s,m,p){var h=n.value,d=n.path,b=[],x=(function(k,L){o(k)?(k.forEach(function(R,$){b.length>=p||m($,R,s)&&b.push({path:L.concat($),value:R})}),k.forEach(function(R,$){b.length>=p||u&&x(R,L.concat($))})):v(k)&&(this.keys(k).forEach(function(R){b.length>=p||m(R,k[R],s)&&b.push({path:L.concat(R),value:k[R]})}),this.keys(k).forEach(function(R){b.length>=p||u&&x(k[R],L.concat(R))}))}).bind(this);return x(h,d),b}}function i(u){return function(n,s,m){return this.descend(s,n.expression.value,u,m)}}function c(u){return function(n,s,m){return this.traverse(s,n.expression.value,u,m)}}function r(){try{return N.apply(this,arguments)}catch{}}function y(u){return u=u.filter(function(n){return n}),T(u,function(n){return n.path.map(function(s){return String(s).replace("-","--")}).join("-")})}function I(u){var n=String(u);return n.match(/^-?[0-9]+$/)?parseInt(n):null}D.exports=S},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"static-eval":15,underscore:12}],5:[function(F,D,P){var C=F("assert"),g=F("./dict"),N=F("./parser"),T=F("./handlers"),S=function(){this.initialize.apply(this,arguments)};S.prototype.initialize=function(){this.parser=new N,this.handlers=new T},S.prototype.parse=function(l){return C.ok(w(l),"we need a path"),this.parser.parse(l)},S.prototype.parent=function(l,i){C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path");var c=this.nodes(l,i)[0];return c&&this._assert_safe_path_keys(c.path),c.path.pop(),this.value(l,c.path)},S.prototype.apply=function(l,i,c){C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path"),C.equal(typeof c,"function","fn needs to be function");var r=this.nodes(l,i).sort(function(y,I){return I.path.length-y.path.length});return r.forEach(function(y){this._assert_safe_path_keys(y.path);var I=y.path.pop(),u=this.value(l,this.stringify(y.path)),n=y.value=c.call(l,u[I]);u[I]=n},this),r},S.prototype.value=function(l,i,c){if(C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path"),arguments.length>=3){var r=this.nodes(l,i).shift();if(!r)return this._vivify(l,i,c);this._assert_safe_path_keys(r.path);var y=r.path.slice(-1).shift(),I=this.parent(l,this.stringify(r.path));I[y]=c}return this.query(l,this.stringify(i),1).shift()},S.prototype._vivify=function(l,i,c){var r=this;C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path");var y=this.parser.parse(i).map(function(u){return u.expression.value});this._assert_safe_path_keys(y);var I=function(u,n){var s=u.pop(),m=r.value(l,u);m||(I(u.concat(),typeof s=="string"?{}:[]),m=r.value(l,u)),r._assert_safe_key(s),m[s]=n};return I(y,c),this.query(l,i)[0]},S.prototype.query=function(l,i,c){C.ok(l instanceof Object,"obj needs to be an object"),C.ok(w(i),"we need a path");var r=this.nodes(l,i,c).map(function(y){return y.value});return r},S.prototype.paths=function(l,i,c){C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path");var r=this.nodes(l,i,c).map(function(y){return y.path});return r},S.prototype.nodes=function(l,i,c){if(C.ok(l instanceof Object,"obj needs to be an object"),C.ok(i,"we need a path"),c===0)return[];var r=this.parser.parse(i);this._assert_safe_components(r);var y=this.handlers,I=[{path:["$"],value:l}],u=[];return r.length&&r[0].expression.type=="root"&&r.shift(),r.length?(r.forEach(function(n,s){if(!(u.length>=c)){var m=y.resolve(n),p=[];I.forEach(function(h){if(!(u.length>=c)){var d=m(n,h,c);s==r.length-1?u=u.concat(d||[]):p=p.concat(d||[])}}),I=p}}),c?u.slice(0,c):u):I},S.prototype.stringify=function(l){C.ok(l,"we need a path");var i="$",c={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return l=this._normalize(l),l.forEach(function(r){if(r.expression.type!="root"){var y=[r.scope,r.operation].join("-"),I=c[y],u;if(r.expression.type=="string_literal"?u=JSON.stringify(r.expression.value):u=r.expression.value,!I)throw new Error("couldn't find template "+y);i+=I.replace(/{{value}}/,u)}}),i},S.prototype._normalize=function(l){if(C.ok(l,"we need a path"),typeof l=="string")return this.parser.parse(l);if(Array.isArray(l)&&typeof l[0]=="string"){var i=[{expression:{type:"root",value:"$"}}];return l.forEach(function(c,r){if(!(c=="$"&&r===0))if(typeof c=="string"&&c.match("^"+g.identifier+"$"))this._assert_safe_key(c),i.push({operation:"member",scope:"child",expression:{value:c,type:"identifier"}});else{var y=typeof c=="number"?"numeric_literal":"string_literal";y==="string_literal"&&this._assert_safe_key(c),i.push({operation:"subscript",scope:"child",expression:{value:c,type:y}})}},this),i}else if(Array.isArray(l)&&typeof l[0]=="object")return l;throw new Error("couldn't understand path "+l)},S.prototype._assert_safe_key=function(l){if(o(l))throw new Error("Unsafe key in JSONPath: "+l)},S.prototype._assert_safe_path_keys=function(l){Array.isArray(l)&&l.forEach(function(i){i!=="$"&&typeof i=="string"&&this._assert_safe_key(i)},this)},S.prototype._assert_safe_components=function(l){var i=this;if(Array.isArray(l)){var c=function(r){if(r){if(r.type==="identifier"||r.type==="string_literal"){i._assert_safe_key(r.value);return}r.type==="union"&&Array.isArray(r.value)&&r.value.forEach(function(y){y&&y.expression&&c(y.expression)})}};l.forEach(function(r){r&&r.expression&&c(r.expression)})}};function w(l){return Object.prototype.toString.call(l)=="[object String]"}function o(l){return l==="__proto__"||l==="prototype"||l==="constructor"}S.Handlers=T,S.Parser=N;var v=new S;v.JSONPath=S,D.exports=v},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(F,D,P){var C=F("./grammar"),g=F("../generated/parser"),N=function(){var T=new g.Parser,S=T.parseError;return T.yy.parseError=function(){T.yy.ast&&T.yy.ast.initialize(),S.apply(T,arguments)},T};N.grammar=C,D.exports=N},{"../generated/parser":1,"./grammar":3}],7:[function(F,D,P){D.exports=function(g,N,T,S){if(typeof N=="string")throw new Error("start cannot be a string");if(typeof T=="string")throw new Error("end cannot be a string");if(typeof S=="string")throw new Error("step cannot be a string");var w=g.length;if(S===0)throw new Error("step cannot be zero");if(S=S?C(S):1,N=N<0?w+N:N,T=T<0?w+T:T,N=C(N===0?0:N||(S>0?0:w-1)),T=C(T===0?0:T||(S>0?w:-1)),N=S>0?Math.max(0,N):Math.min(w,N),T=S>0?Math.min(T,w):Math.max(-1,T),S>0&&T<=N)return[];if(S<0&&N<=T)return[];for(var o=[],v=N;v!=T&&!(S<0&&v<=T||S>0&&v>=T);v+=S)o.push(g[v]);return o};function C(g){return String(g).match(/^[0-9]+$/)?parseInt(g):Number.isFinite(g)?parseInt(g,10):0}},{}],8:[function(F,D,P){var C=F("util/"),g=Array.prototype.slice,N=Object.prototype.hasOwnProperty,T=D.exports=l;T.AssertionError=function(s){this.name="AssertionError",this.actual=s.actual,this.expected=s.expected,this.operator=s.operator,s.message?(this.message=s.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var m=s.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,m);else{var p=new Error;if(p.stack){var h=p.stack,d=m.name,b=h.indexOf(`
`+d);if(b>=0){var x=h.indexOf(`
`,b+1);h=h.substring(x+1)}this.stack=h}}},C.inherits(T.AssertionError,Error);function S(n,s){return C.isUndefined(s)?""+s:C.isNumber(s)&&!isFinite(s)||C.isFunction(s)||C.isRegExp(s)?s.toString():s}function w(n,s){return C.isString(n)?n.length<s?n:n.slice(0,s):n}function o(n){return w(JSON.stringify(n.actual,S),128)+" "+n.operator+" "+w(JSON.stringify(n.expected,S),128)}function v(n,s,m,p,h){throw new T.AssertionError({message:m,actual:n,expected:s,operator:p,stackStartFunction:h})}T.fail=v;function l(n,s){n||v(n,!0,s,"==",T.ok)}T.ok=l,T.equal=function(s,m,p){s!=m&&v(s,m,p,"==",T.equal)},T.notEqual=function(s,m,p){s==m&&v(s,m,p,"!=",T.notEqual)},T.deepEqual=function(s,m,p){i(s,m)||v(s,m,p,"deepEqual",T.deepEqual)};function i(n,s){if(n===s)return!0;if(C.isBuffer(n)&&C.isBuffer(s)){if(n.length!=s.length)return!1;for(var m=0;m<n.length;m++)if(n[m]!==s[m])return!1;return!0}else return C.isDate(n)&&C.isDate(s)?n.getTime()===s.getTime():C.isRegExp(n)&&C.isRegExp(s)?n.source===s.source&&n.global===s.global&&n.multiline===s.multiline&&n.lastIndex===s.lastIndex&&n.ignoreCase===s.ignoreCase:!C.isObject(n)&&!C.isObject(s)?n==s:r(n,s)}function c(n){return Object.prototype.toString.call(n)=="[object Arguments]"}function r(n,s){if(C.isNullOrUndefined(n)||C.isNullOrUndefined(s)||n.prototype!==s.prototype)return!1;if(C.isPrimitive(n)||C.isPrimitive(s))return n===s;var m=c(n),p=c(s);if(m&&!p||!m&&p)return!1;if(m)return n=g.call(n),s=g.call(s),i(n,s);var h=u(n),d=u(s),b,x;if(h.length!=d.length)return!1;for(h.sort(),d.sort(),x=h.length-1;x>=0;x--)if(h[x]!=d[x])return!1;for(x=h.length-1;x>=0;x--)if(b=h[x],!i(n[b],s[b]))return!1;return!0}T.notDeepEqual=function(s,m,p){i(s,m)&&v(s,m,p,"notDeepEqual",T.notDeepEqual)},T.strictEqual=function(s,m,p){s!==m&&v(s,m,p,"===",T.strictEqual)},T.notStrictEqual=function(s,m,p){s===m&&v(s,m,p,"!==",T.notStrictEqual)};function y(n,s){return!n||!s?!1:Object.prototype.toString.call(s)=="[object RegExp]"?s.test(n):n instanceof s?!0:s.call({},n)===!0}function I(n,s,m,p){var h;C.isString(m)&&(p=m,m=null);try{s()}catch(d){h=d}if(p=(m&&m.name?" ("+m.name+").":".")+(p?" "+p:"."),n&&!h&&v(h,m,"Missing expected exception"+p),!n&&y(h,m)&&v(h,m,"Got unwanted exception"+p),n&&h&&m&&!y(h,m)||!n&&h)throw h}T.throws=function(n,s,m){I.apply(this,[!0].concat(g.call(arguments)))},T.doesNotThrow=function(n,s){I.apply(this,[!1].concat(g.call(arguments)))},T.ifError=function(n){if(n)throw n};var u=Object.keys||function(n){var s=[];for(var m in n)N.call(n,m)&&s.push(m);return s}},{"util/":11}],9:[function(F,D,P){typeof Object.create=="function"?D.exports=function(g,N){g.super_=N,g.prototype=Object.create(N.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:D.exports=function(g,N){g.super_=N;var T=function(){};T.prototype=N.prototype,g.prototype=new T,g.prototype.constructor=g}},{}],10:[function(F,D,P){D.exports=function(g){return g&&typeof g=="object"&&typeof g.copy=="function"&&typeof g.fill=="function"&&typeof g.readUInt8=="function"}},{}],11:[function(F,D,P){(function(C,g){var N=/%[sdj%]/g;P.format=function(E){if(!d(E)){for(var O=[],M=0;M<arguments.length;M++)O.push(w(arguments[M]));return O.join(" ")}for(var M=1,Y=arguments,ne=Y.length,j=String(E).replace(N,function(Z){if(Z==="%%")return"%";if(M>=ne)return Z;switch(Z){case"%s":return String(Y[M++]);case"%d":return Number(Y[M++]);case"%j":try{return JSON.stringify(Y[M++])}catch{return"[Circular]"}default:return Z}}),X=Y[M];M<ne;X=Y[++M])m(X)||!L(X)?j+=" "+X:j+=" "+w(X);return j},P.deprecate=function(E,O){if(x(g.process))return function(){return P.deprecate(E,O).apply(this,arguments)};if(C.noDeprecation===!0)return E;var M=!1;function Y(){if(!M){if(C.throwDeprecation)throw new Error(O);C.traceDeprecation?console.trace(O):console.error(O),M=!0}return E.apply(this,arguments)}return Y};var T={},S;P.debuglog=function(E){if(x(S)&&(S=C.env.NODE_DEBUG||""),E=E.toUpperCase(),!T[E])if(new RegExp("\\b"+E+"\\b","i").test(S)){var O=C.pid;T[E]=function(){var M=P.format.apply(P,arguments);console.error("%s %d: %s",E,O,M)}}else T[E]=function(){};return T[E]};function w(E,O){var M={seen:[],stylize:v};return arguments.length>=3&&(M.depth=arguments[2]),arguments.length>=4&&(M.colors=arguments[3]),s(O)?M.showHidden=O:O&&P._extend(M,O),x(M.showHidden)&&(M.showHidden=!1),x(M.depth)&&(M.depth=2),x(M.colors)&&(M.colors=!1),x(M.customInspect)&&(M.customInspect=!0),M.colors&&(M.stylize=o),i(M,E,M.depth)}P.inspect=w,w.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},w.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(E,O){var M=w.styles[O];return M?"\x1B["+w.colors[M][0]+"m"+E+"\x1B["+w.colors[M][1]+"m":E}function v(E,O){return E}function l(E){var O={};return E.forEach(function(M,Y){O[M]=!0}),O}function i(E,O,M){if(E.customInspect&&O&&J(O.inspect)&&O.inspect!==P.inspect&&!(O.constructor&&O.constructor.prototype===O)){var Y=O.inspect(M,E);return d(Y)||(Y=i(E,Y,M)),Y}var ne=c(E,O);if(ne)return ne;var j=Object.keys(O),X=l(j);if(E.showHidden&&(j=Object.getOwnPropertyNames(O)),$(O)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return r(O);if(j.length===0){if(J(O)){var Z=O.name?": "+O.name:"";return E.stylize("[Function"+Z+"]","special")}if(k(O))return E.stylize(RegExp.prototype.toString.call(O),"regexp");if(R(O))return E.stylize(Date.prototype.toString.call(O),"date");if($(O))return r(O)}var te="",ue=!1,ve=["{","}"];if(n(O)&&(ue=!0,ve=["[","]"]),J(O)){var Te=O.name?": "+O.name:"";te=" [Function"+Te+"]"}if(k(O)&&(te=" "+RegExp.prototype.toString.call(O)),R(O)&&(te=" "+Date.prototype.toUTCString.call(O)),$(O)&&(te=" "+r(O)),j.length===0&&(!ue||O.length==0))return ve[0]+te+ve[1];if(M<0)return k(O)?E.stylize(RegExp.prototype.toString.call(O),"regexp"):E.stylize("[Object]","special");E.seen.push(O);var Ee;return ue?Ee=y(E,O,M,X,j):Ee=j.map(function(Oe){return I(E,O,M,X,Oe,ue)}),E.seen.pop(),u(Ee,te,ve)}function c(E,O){if(x(O))return E.stylize("undefined","undefined");if(d(O)){var M="'"+JSON.stringify(O).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return E.stylize(M,"string")}if(h(O))return E.stylize(""+O,"number");if(s(O))return E.stylize(""+O,"boolean");if(m(O))return E.stylize("null","null")}function r(E){return"["+Error.prototype.toString.call(E)+"]"}function y(E,O,M,Y,ne){for(var j=[],X=0,Z=O.length;X<Z;++X)fe(O,String(X))?j.push(I(E,O,M,Y,String(X),!0)):j.push("");return ne.forEach(function(te){te.match(/^\d+$/)||j.push(I(E,O,M,Y,te,!0))}),j}function I(E,O,M,Y,ne,j){var X,Z,te;if(te=Object.getOwnPropertyDescriptor(O,ne)||{value:O[ne]},te.get?te.set?Z=E.stylize("[Getter/Setter]","special"):Z=E.stylize("[Getter]","special"):te.set&&(Z=E.stylize("[Setter]","special")),fe(Y,ne)||(X="["+ne+"]"),Z||(E.seen.indexOf(te.value)<0?(m(M)?Z=i(E,te.value,null):Z=i(E,te.value,M-1),Z.indexOf(`
`)>-1&&(j?Z=Z.split(`
`).map(function(ue){return"  "+ue}).join(`
`).substr(2):Z=`
`+Z.split(`
`).map(function(ue){return"   "+ue}).join(`
`))):Z=E.stylize("[Circular]","special")),x(X)){if(j&&ne.match(/^\d+$/))return Z;X=JSON.stringify(""+ne),X.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(X=X.substr(1,X.length-2),X=E.stylize(X,"name")):(X=X.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),X=E.stylize(X,"string"))}return X+": "+Z}function u(E,O,M){var Y=E.reduce(function(ne,j){return j.indexOf(`
`)>=0,ne+j.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Y>60?M[0]+(O===""?"":O+`
 `)+" "+E.join(`,
  `)+" "+M[1]:M[0]+O+" "+E.join(", ")+" "+M[1]}function n(E){return Array.isArray(E)}P.isArray=n;function s(E){return typeof E=="boolean"}P.isBoolean=s;function m(E){return E===null}P.isNull=m;function p(E){return E==null}P.isNullOrUndefined=p;function h(E){return typeof E=="number"}P.isNumber=h;function d(E){return typeof E=="string"}P.isString=d;function b(E){return typeof E=="symbol"}P.isSymbol=b;function x(E){return E===void 0}P.isUndefined=x;function k(E){return L(E)&&z(E)==="[object RegExp]"}P.isRegExp=k;function L(E){return typeof E=="object"&&E!==null}P.isObject=L;function R(E){return L(E)&&z(E)==="[object Date]"}P.isDate=R;function $(E){return L(E)&&(z(E)==="[object Error]"||E instanceof Error)}P.isError=$;function J(E){return typeof E=="function"}P.isFunction=J;function H(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}P.isPrimitive=H,P.isBuffer=F("./support/isBuffer");function z(E){return Object.prototype.toString.call(E)}function ee(E){return E<10?"0"+E.toString(10):E.toString(10)}var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Q(){var E=new Date,O=[ee(E.getHours()),ee(E.getMinutes()),ee(E.getSeconds())].join(":");return[E.getDate(),se[E.getMonth()],O].join(" ")}P.log=function(){console.log("%s - %s",Q(),P.format.apply(P,arguments))},P.inherits=F("inherits"),P._extend=function(E,O){if(!O||!L(O))return E;for(var M=Object.keys(O),Y=M.length;Y--;)E[M[Y]]=O[M[Y]];return E};function fe(E,O){return Object.prototype.hasOwnProperty.call(E,O)}}).call(this,F("_process"),typeof Ve<"u"?Ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":10,_process:14,inherits:9}],12:[function(F,D,P){},{}],13:[function(F,D,P){(function(C){function g(w,o){for(var v=0,l=w.length-1;l>=0;l--){var i=w[l];i==="."?w.splice(l,1):i===".."?(w.splice(l,1),v++):v&&(w.splice(l,1),v--)}if(o)for(;v--;v)w.unshift("..");return w}P.resolve=function(){for(var w="",o=!1,v=arguments.length-1;v>=-1&&!o;v--){var l=v>=0?arguments[v]:C.cwd();if(typeof l!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!l)continue;w=l+"/"+w,o=l.charAt(0)==="/"}return w=g(T(w.split("/"),function(i){return!!i}),!o).join("/"),(o?"/":"")+w||"."},P.normalize=function(w){var o=P.isAbsolute(w),v=S(w,-1)==="/";return w=g(T(w.split("/"),function(l){return!!l}),!o).join("/"),!w&&!o&&(w="."),w&&v&&(w+="/"),(o?"/":"")+w},P.isAbsolute=function(w){return w.charAt(0)==="/"},P.join=function(){var w=Array.prototype.slice.call(arguments,0);return P.normalize(T(w,function(o,v){if(typeof o!="string")throw new TypeError("Arguments to path.join must be strings");return o}).join("/"))},P.relative=function(w,o){w=P.resolve(w).substr(1),o=P.resolve(o).substr(1);function v(u){for(var n=0;n<u.length&&u[n]==="";n++);for(var s=u.length-1;s>=0&&u[s]==="";s--);return n>s?[]:u.slice(n,s-n+1)}for(var l=v(w.split("/")),i=v(o.split("/")),c=Math.min(l.length,i.length),r=c,y=0;y<c;y++)if(l[y]!==i[y]){r=y;break}for(var I=[],y=r;y<l.length;y++)I.push("..");return I=I.concat(i.slice(r)),I.join("/")},P.sep="/",P.delimiter=":",P.dirname=function(w){if(typeof w!="string"&&(w=w+""),w.length===0)return".";for(var o=w.charCodeAt(0),v=o===47,l=-1,i=!0,c=w.length-1;c>=1;--c)if(o=w.charCodeAt(c),o===47){if(!i){l=c;break}}else i=!1;return l===-1?v?"/":".":v&&l===1?"/":w.slice(0,l)};function N(w){typeof w!="string"&&(w=w+"");var o=0,v=-1,l=!0,i;for(i=w.length-1;i>=0;--i)if(w.charCodeAt(i)===47){if(!l){o=i+1;break}}else v===-1&&(l=!1,v=i+1);return v===-1?"":w.slice(o,v)}P.basename=function(w,o){var v=N(w);return o&&v.substr(-1*o.length)===o&&(v=v.substr(0,v.length-o.length)),v},P.extname=function(w){typeof w!="string"&&(w=w+"");for(var o=-1,v=0,l=-1,i=!0,c=0,r=w.length-1;r>=0;--r){var y=w.charCodeAt(r);if(y===47){if(!i){v=r+1;break}continue}l===-1&&(i=!1,l=r+1),y===46?o===-1?o=r:c!==1&&(c=1):o!==-1&&(c=-1)}return o===-1||l===-1||c===0||c===1&&o===l-1&&o===v+1?"":w.slice(o,l)};function T(w,o){if(w.filter)return w.filter(o);for(var v=[],l=0;l<w.length;l++)o(w[l],l,w)&&v.push(w[l]);return v}var S="ab".substr(-1)==="b"?function(w,o,v){return w.substr(o,v)}:function(w,o,v){return o<0&&(o=w.length+o),w.substr(o,v)}}).call(this,F("_process"))},{_process:14}],14:[function(F,D,P){var C=D.exports={},g,N;function T(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=T}catch{g=T}try{typeof clearTimeout=="function"?N=clearTimeout:N=S}catch{N=S}})();function w(n){if(g===setTimeout)return setTimeout(n,0);if((g===T||!g)&&setTimeout)return g=setTimeout,setTimeout(n,0);try{return g(n,0)}catch{try{return g.call(null,n,0)}catch{return g.call(this,n,0)}}}function o(n){if(N===clearTimeout)return clearTimeout(n);if((N===S||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(n);try{return N(n)}catch{try{return N.call(null,n)}catch{return N.call(this,n)}}}var v=[],l=!1,i,c=-1;function r(){!l||!i||(l=!1,i.length?v=i.concat(v):c=-1,v.length&&y())}function y(){if(!l){var n=w(r);l=!0;for(var s=v.length;s;){for(i=v,v=[];++c<s;)i&&i[c].run();c=-1,s=v.length}i=null,l=!1,o(n)}}C.nextTick=function(n){var s=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)s[m-1]=arguments[m];v.push(new I(n,s)),v.length===1&&!l&&w(y)};function I(n,s){this.fun=n,this.array=s}I.prototype.run=function(){this.fun.apply(null,this.array)},C.title="browser",C.browser=!0,C.env={},C.argv=[],C.version="",C.versions={};function u(){}C.on=u,C.addListener=u,C.once=u,C.off=u,C.removeListener=u,C.removeAllListeners=u,C.emit=u,C.prependListener=u,C.prependOnceListener=u,C.listeners=function(n){return[]},C.binding=function(n){throw new Error("process.binding is not supported")},C.cwd=function(){return"/"},C.chdir=function(n){throw new Error("process.chdir is not supported")},C.umask=function(){return 0}},{}],15:[function(F,D,P){var C=F("escodegen").generate;D.exports=function(N,T,S){S||(S={});var w=!S.allowAccessToMethodsOnFunctions;T||(T={});var o={},v=(function l(i,c){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var r=l(i.argument,c);return i.operator==="+"?+r:i.operator==="-"?-r:i.operator==="~"?~r:i.operator==="!"?!r:o}else if(i.type==="ArrayExpression"){for(var y=[],I=0,u=i.elements.length;I<u;I++){var n=l(i.elements[I],c);if(n===o)return o;y.push(n)}return y}else if(i.type==="ObjectExpression"){for(var s={},I=0;I<i.properties.length;I++){var m=i.properties[I],p=m.value===null?m.value:l(m.value,c);if(p===o)return o;s[m.key.value||m.key.name]=p}return s}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var h=i.operator;if(h==="&&"){var u=l(i.left);if(u===o)return o;if(!u)return u;var d=l(i.right);return d===o?o:d}else if(h==="||"){var u=l(i.left);if(u===o)return o;if(u)return u;var d=l(i.right);return d===o?o:d}var u=l(i.left,c);if(u===o)return o;var d=l(i.right,c);return d===o?o:h==="=="?u==d:h==="==="?u===d:h==="!="?u!=d:h==="!=="?u!==d:h==="+"?u+d:h==="-"?u-d:h==="*"?u*d:h==="/"?u/d:h==="%"?u%d:h==="<"?u<d:h==="<="?u<=d:h===">"?u>d:h===">="?u>=d:h==="|"?u|d:h==="&"?u&d:h==="^"?u^d:o}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(T,i.name)?T[i.name]:o;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(T,"this")?T.this:o;if(i.type==="CallExpression"){var b=l(i.callee,c);if(b===o||typeof b!="function")return o;var x=i.callee.object?l(i.callee.object,c):o;x===o&&(x=null);for(var k=[],I=0,u=i.arguments.length;I<u;I++){var n=l(i.arguments[I],c);if(n===o)return o;k.push(n)}return c?void 0:b.apply(x,k)}else if(i.type==="MemberExpression"){var s=l(i.object,c);if(s===o||typeof s=="function"&&w)return o;if(i.property.type==="Identifier"&&!i.computed)return g(i.property.name)?o:s[i.property.name];var m=l(i.property,c);return m===null||m===o||g(m)?o:s[m]}else if(i.type==="ConditionalExpression"){var r=l(i.test,c);return r===o?o:r?l(i.consequent):l(i.alternate,c)}else if(i.type==="ExpressionStatement"){var r=l(i.expression,c);return r===o?o:r}else{if(i.type==="ReturnStatement")return l(i.argument,c);if(i.type==="FunctionExpression"){var L=i.body.body,R={};Object.keys(T).forEach(function(E){R[E]=T[E]});for(var I=0;I<i.params.length;I++){var $=i.params[I];if($.type=="Identifier")T[$.name]=null;else return o}for(var I in L)if(l(L[I],!0)===o)return o;T=R;var J=Object.keys(T),H=J.map(function(E){return T[E]});return Function(J.join(", "),"return "+C(i)).apply(null,H)}else if(i.type==="TemplateLiteral"){for(var z="",I=0;I<i.expressions.length;I++)z+=l(i.quasis[I],c),z+=l(i.expressions[I],c);return z+=l(i.quasis[I],c),z}else if(i.type==="TaggedTemplateExpression"){var ee=l(i.tag,c),se=i.quasi,Q=se.quasis.map(l),fe=se.expressions.map(l);return ee.apply(null,[Q].concat(fe))}else return i.type==="TemplateElement"?i.value.cooked:o}}})(N);return v===o?void 0:v};function g(N){return N==="constructor"||N==="__proto__"}},{escodegen:12}],jsonpath:[function(F,D,P){D.exports=F("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")})})(De)),De.exports}var Ut=Bt();function Wt(xe){let ge=Mt(),F=Ft(),D=new Ut.JSONPath;function P(h,d){var b={};ge.state.geonetwork&&(d.logo&&(b.logo=ge.state.geonetwork+"/"+d.logo.replace(/^\//,"")),b.exportLinks={xml:ge.state.geonetwork+"/srv/api/records/"+h+"/formatters/xml?attachment=true",pdf:ge.state.geonetwork+"/srv/api/records/"+h+"/formatters/xsl-view?root=div&output=pdf"}),b.group=d.group;var x=ge.state.locale;x==="fre"?x="FR":x="EN",b.uuid=h,b.title=y(D.query(d,"$..['gmd:citation']['gmd:CI_Citation']['gmd:title']"),x);var k=y(D.query(d,"$..['gmd:abstract']"),x);k&&Array.isArray(k)?k=k[0]:k||(k=""),b.dateStamp=d["gmd:dateStamp"]["gco:DateTime"]["#text"],b.description=k.replace(/(?:\\[rn]|[\r\n])/g,"<br />"),b.credit=y(d["gmd:credit"],x),b.purpose=y(d["gmd:purpose"],x),d["gmd:parentIdentifier"]&&(b.parentIdentifier=d["gmd:parentIdentifier"]["gco:CharacterString"]["#text"]),d["gmd:hierarchyLevel"]?b.hierarchyLevel=d["gmd:hierarchyLevel"]["gmd:MD_ScopeCode"]["@codeListValue"]:b.hierarchyLevel="dataset",b.purpose&&(b.purpose=b.purpose.replace(/(?:\\[rn]|[\r\n])/g,"<br />"));var L=d["gmd:identificationInfo"]["gmd:MD_DataIdentification"];b.status=D.query(d,"$..['gmd:status']['gmd:MD_ProgressCode']['@codeListValue']")[0],b.identifier=D.query(L,"$..['gmd:identifier']..['gco:CharacterString']['#text']")[0],L["gmd:topicCategory"]&&(b.topicCat=L["gmd:topicCategory"]["gmd:MD_TopicCategoryCode"]),u(b,L["gmd:descriptiveKeywords"],x),b.images=I(L["gmd:graphicOverview"],x);var R=T(D.query(L,"$..['gmd:resourceConstraints']..['gmd:MD_LegalConstraints']"),x);R&&(b.legalConstraints=R);var R=T(D.query(L,"$..['gmd:resourceConstraints']..['gmd:MD_Constraints']"),x);R&&(b.constraints=R),n(b,d,x),o(b,d,x);var $=S(D.query(L["gmd:pointOfContact"],"$..['gmd:CI_ResponsibleParty']"),x);b.contacts={resource:$};var $=S(D.query(d["gmd:contact"],"$..['gmd:CI_ResponsibleParty']"),x);b.contacts.metadata=$;var J=d["gmd:distributionInfo"]["gmd:MD_Distribution"]["gmd:distributionFormat"]||{};return i(b,J,x),s(b,d,x,h),l(b,L["gmd:extent"]),v(b,D.query(L,"$..['gmd:citation']..['gmd:CI_Date']")),g(b,L["gmd:aggregationInfo"]),m(b,L["gmd:spatialResolution"]),p(b,L["gmd:spatialRepresentationType"]),b}function C(h){if(h===void 0)return null;var d=[];for(var b in h)b!=="gmd:electronicMailAddress"&&h[b]["gco:CharacterString"]&&h[b]["gco:CharacterString"]["#text"]&&d.push(h[b]["gco:CharacterString"]["#text"]);return d.length==0?null:d.join(",")}function g(h,d){!d||d===void 0||(h.related||(h.related={siblings:[]}),h.related.siblings||(h.related.siblings=[]),d&&!d.forEach&&(d=[d]),d.forEach(function(b){var x=b["gmd:MD_AggregateInformation"]["gmd:initiativeType"]["gmd:DS_InitiativeTypeCode"]["@codeListValue"],k=D.query(b,"$..['gmd:MD_Identifier']..['#text']");k.length>0&&h.related.siblings.push({initiativeType:x,title:k[0],id:k[0]})}))}function N(h){if(h===void 0)return null;var d=h["gmd:southBoundLatitude"]["gco:Decimal"]["#text"],b=h["gmd:northBoundLatitude"]["gco:Decimal"]["#text"],x=h["gmd:westBoundLongitude"]["gco:Decimal"]["#text"],k=h["gmd:eastBoundLongitude"]["gco:Decimal"]["#text"],L=[[[parseFloat(x),parseFloat(d)],[parseFloat(x),parseFloat(b)],[parseFloat(k),parseFloat(b)],[parseFloat(k),parseFloat(d)],[parseFloat(x),parseFloat(d)]]];return L}function T(h,d){if(!h)return null;var b=[];return!h||h.length===0?null:(h.forEach(function(x){var k=x["gmd:otherConstraints"];if(k){var k=k.forEach?k:[k];k.forEach(function(R){b.push(y(R,d))})}var k=x["gmd:useLimitation"];if(k){var k=k.forEach?k:[k];k.forEach(function(R){b.push(y(R,d))})}}),b)}function S(h,d){var b=[];if(!h)return b;h.length>0?h.forEach(function(k){b.push(w(k,d))}):b.push(w(h,d));var x={};return b.forEach(function(k){x[k[0]]?x[k[0]].push(k):x[k[0]]=[k]}),x}function w(h,d){var b=D.query(h,"$..['gmd:CI_RoleCode']['@codeListValue']")[0],x=D.query(h,"$..['gmd:organisationName']")[0],k=y(x,d),L=r(x),R=D.query(h,"$..['gmd:individualName']")[0],$=y(R,d),J=r(R),H=D.query(h,"$..['gmd:electronicMailAddress']..['#text']")[0],z=C(D.query(h,"$..['gmd:CI_Address']")[0]),ee=null;return[b,type,k,$,H,ee,null,z,L,J]}function o(h,d,b){var x=D.query(d,"$..['gmd:referenceSystemInfo']..['gmd:code']");h.crs=[],x.forEach(function(k){h.crs.push(y(k,b))})}function v(h,d){!d||d==="undefined"||d.length===0||d.forEach(function(b){var x=b["gmd:dateType"]["gmd:CI_DateTypeCode"]["@codeListValue"],k=b["gmd:date"]["gco:Date"]?b["gmd:date"]["gco:Date"]["#text"]:b["gmd:date"]["gco:DateTime"]["#text"];h[x+"Date"]=k})}function l(h,d){h.temporalExtents=[];var b=D.query(d,"$..['gml:beginPosition']");if(b.length>0){var x={start:{date:b[0]}},k=D.query(d,"$..['gml:endPosition']");k.length>0&&(x.end={date:k[0]}),h.temporalExtents.push(x)}var L=D.query(d,"$..['gmd:EX_GeographicBoundingBox']");L.length!==0&&(L.length>1?(h.geojson={type:"FeatureCollection",features:[]},L.forEach(function(R){h.geojson.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:N(R)}})})):h.geojson={type:"Feature",geometry:{type:"Polygon",coordinates:N(L[0])}})}function i(h,d,b){var x=[],k=D.query(d,"$..['gmd:MD_Format']");if(k===void 0)return x;k.forEach||(k=[k]),k.forEach(function(L){x.push(y(L["gmd:name"],b))}),h.format=x}function c(h,d){if(d=new URL(d),d.search.length>3){var b=d.search.replace("?","").split("&");d=d.protocol+"//"+d.hostname+d.pathname,console.log(d)}else{if(!h)return{search:"free",view:"UNKNOWN",download:"UNKOWN"};var b=h.split(";")}var x={},k={};return b.forEach(function(L){var R=L.split("=");R.length>1&&["search","view","download"].indexOf(R[0])>=0?x[R[0]]=R[1]:k[R[0]]=R[1].split(",")}),{access:x,query:k,url:d}}function r(h){if(h===void 0)return null;var d=D.query(h,"$..['gmx:Anchor']['@xlink:href']");return d.length>0?d[0]:null}function y(h,d){var b=null;if(h===void 0)return null;if(d){var x=D.query(h,"$..['gmd:LocalisedCharacterString']");x.length>0&&x.forEach(function(k){k["@locale"]==="#"+d&&k["#text"]&&(b=k["#text"])})}return b||(h=h.length>0?h[0]:h,b=h["gco:CharacterString"]?h["gco:CharacterString"]["#text"]:h["gmx:Anchor"]?h["gmx:Anchor"]["#text"]:null),b}function I(h,d){var b=[];return h===void 0?null:(h.forEach||(h=[h]),h.forEach(function(x){if(x["gmd:MD_BrowseGraphic"]["gmd:fileName"]["gco:CharacterString"]){var k=x["gmd:MD_BrowseGraphic"]["gmd:fileName"]["gco:CharacterString"]["#text"],L=y(x["gmd:MD_BrowseGraphic"]["gmd:fileDescription"],d);b.push(["overview",k,L||""])}}),b)}function u(h,d,b){var x=[];d&&d.forEach(function(k){var L=k["gmd:MD_Keywords"]["gmd:keyword"],R=D.query(k,"$..['gmd:MD_KeywordTypeCode']['@codeListValue']");R?R=R[0]:R=null;var $=!1;if(k["gmd:MD_Keywords"]["gmd:thesaurusName"]){var J=D.query(k["gmd:MD_Keywords"]["gmd:thesaurusName"],"$..['gmd:identifier']..['gmd:code']['gmx:Anchor']['#text']")[0];if(console.log(J),J){var H=J.split(".");R=H[3];var J="th_"+H.slice(4,H.length+1).join(".");D.query(k["gmd:MD_Keywords"]["gmd:thesaurusName"],"$..['gmd:title']..['#text']"),F.organismThesaurus&&J.indexOf(F.organismThesaurus.th_name)>=0&&(console.log("est dataCenter ",J),$=!0)}}L.forEach||(L=[L]);var z=[];$&&(h.dataCenter=[]),L.forEach(function(ee){var se=y(ee,b),Q=D.query(ee,"$..['gmx:Anchor']['@xlink:href']");Q&&(Q=Q[0]),se&&(z.push({name:y(ee,b),link:Q}),$&&h.dataCenter.push(F.organisms[Q]))}),x.push({type:R,key:J,keywords:z})}),h.keyword=x}function n(h,d,b){h.lineage="un tesst curiosité";var x=D.query(d,"$..['gmd:statement']"),k=[];x.forEach(function(L){var R=y(L,b);R&&k.push(R.replace(/(?:\\[rn]|[\r\n])/g,"<br />"))}),h.lineage=k}function s(h,d,b,x){var k={},L=D.query(d,"$..['gmd:CI_OnlineResource']");if(L[0]&&L[0].length>0){var R=[];L.forEach(function($){R=R.concat($)}),L=R}L.forEach(function($,J){var H="WWW:LINK-1.0-http--link";if($["gmd:protocol"]["gmx:Anchor"])var H=$["gmd:protocol"]["gmx:Anchor"]["#text"];else if($["gmd:protocol"]["gco:CharacterString"])var H=$["gmd:protocol"]["gco:CharacterString"]["#text"];var z=$["gmd:linkage"]["gmd:URL"],ee=y($["gmd:name"],b),se=y($["gmd:description"],b),Q={id:J,name:ee,description:se,url:z,type:H};switch(H){case"UKST":case"OpenSearch":case"Opensearch":case"opensearch":case"SensorThings":case"STAC":var fe=c(se,z);console.log(z),k.api||(k.api={}),k.api[H]={url:fe.url,name:ee,protocol:H,access:fe.access,query:fe.query},h[H.toLowerCase()]=z;break;case"GetMap":case"WTS":case"WMTS":case"OGC API - Tiles":case"XYZ-Tile-Service":case"OGC:WMS":case"OGC:WMS-1.1.1-http-get-map":case"OGC:WFS":case"OGC:WFS-G":case"OGC:KML":case"OGC:OWS":case"OGC:OWS-C":case"OGC Web Map Service":case"GLG:KML-2.0-http-get-map":k.layers||(k.layers=[]);var E=x+"_"+k.layers.length;Q.id=E,k.layers.push(Q);break;case"application/vnd.google-earth.kml+xml":case"WWW:DOWNLOAD-1.0-ftp--download":break;case"WWW:DOWNLOAD-1.0-link--download":case"telechargement":case"download":case"WWW:DOWNLOAD-1.0-http--download":k.download||(k.download=[]),k.download.push(Q);break;case"WWW:DOWNLOAD-1.0-link--order":case"order":k.order||(k.order=[]),k.order.push(Q);break;case"WWW:LINK-1.0-http--related":k.relatedLinks||(k.relatedLinks=[]),k.relatedLinks.push(Q);break;case"WWW:LINK-1.0-http--link":case"WWW:LINK-1.0-http--partners":case"DOI":default:k.links||(k.links=[]),k.links.push(Q);break}}),h.links=k}function m(h,d){if(d!==void 0){var b=D.query(d,"$..['gco:Distance']"),x=D.query(d,"$..['gmd:denominator']['gco:Integer']"),k=[];if(b&&b.length>0){var L=b.map(R=>R["#text"]+" "+R["@uom"]);k=L}if(x&&x.length>0){var L=b.map($=>"1 / "+$["#text"]);k=k.concat(L)}h.resolution=k}}function p(h,d){d!==void 0&&d["gmd:MD_SpatialRepresentationTypeCode"]&&d["gmd:MD_SpatialRepresentationTypeCode"]["@codeListValue"]&&(h.representation=d["gmd:MD_SpatialRepresentationTypeCode"]["@codeListValue"])}return{transform:P}}export{Wt as default};
