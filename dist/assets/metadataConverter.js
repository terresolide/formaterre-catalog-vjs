import{c as Ve}from"./GridView.js";import{a as Dt,u as Mt}from"./index.js";function Te(xe){throw new Error('Could not dynamically require "'+xe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var De={exports:{}};/*! jsonpath 1.1.1 */var Xe;function Ft(){return Xe||(Xe=1,(function(xe,ge){(function(F){xe.exports=F()})(function(){return(function F(R,P,_){function y(S,v){if(!P[S]){if(!R[S]){var s=typeof Te=="function"&&Te;if(!v&&s)return s(S,!0);if(L)return L(S,!0);var l=new Error("Cannot find module '"+S+"'");throw l.code="MODULE_NOT_FOUND",l}var d=P[S]={exports:{}};R[S][0].call(d.exports,function(o){var c=R[S][1][o];return y(c||o)},d,d.exports,F,R,P,_)}return P[S].exports}for(var L=typeof Te=="function"&&Te,C=0;C<_.length;C++)y(_[C]);return y})({"./aesprim":[function(F,R,P){(function(_,y){y(typeof P<"u"?P:_.esprima={})})(this,function(_){var y,L,C,S,v,s,l,d,o,c,r,g,O,h,n,a,p,f;y={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},L={},L[y.BooleanLiteral]="Boolean",L[y.EOF]="<end>",L[y.Identifier]="Identifier",L[y.Keyword]="Keyword",L[y.NullLiteral]="Null",L[y.NumericLiteral]="Numeric",L[y.Punctuator]="Punctuator",L[y.StringLiteral]="String",L[y.RegularExpression]="RegularExpression",C=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],S={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},v={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function m(e,t){if(!e)throw new Error("ASSERT: "+t)}function E(e){return e>=48&&e<=57}function k(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w(e){return"01234567".indexOf(e)>=0}function x(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function N(e){return e===10||e===13||e===8232||e===8233}function D(e){return e==64||e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function $(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function J(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function z(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function K(e){return e==="eval"||e==="arguments"}function ee(e){if(c&&z(e))return!0;switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}}function ne(e,t,i,u,I){var A;m(typeof i=="number","Comment must have valid position"),!(p.lastCommentStart>=i)&&(p.lastCommentStart=i,A={type:e,value:t},f.range&&(A.range=[i,u]),f.loc&&(A.loc=I),f.comments.push(A),f.attachComment&&(f.leadingComments.push(A),f.trailingComments.push(A)))}function Y(e){var t,i,u,I;for(t=r-e,i={start:{line:g,column:r-O-e}};r<h;)if(u=o.charCodeAt(r),++r,N(u)){f.comments&&(I=o.slice(t+e,r-1),i.end={line:g,column:r-O-1},ne("Line",I,t,r-1,i)),u===13&&o.charCodeAt(r)===10&&++r,++g,O=r;return}f.comments&&(I=o.slice(t+e,r),i.end={line:g,column:r-O},ne("Line",I,t,r,i))}function me(){var e,t,i,u;for(f.comments&&(e=r-2,t={start:{line:g,column:r-O-2}});r<h;)if(i=o.charCodeAt(r),N(i))i===13&&o.charCodeAt(r+1)===10&&++r,++g,++r,O=r,r>=h&&W({},s.UnexpectedToken,"ILLEGAL");else if(i===42){if(o.charCodeAt(r+1)===47){++r,++r,f.comments&&(u=o.slice(e+2,r-2),t.end={line:g,column:r-O},ne("Block",u,e,r,t));return}++r}else++r;W({},s.UnexpectedToken,"ILLEGAL")}function b(){var e,t;for(t=r===0;r<h;)if(e=o.charCodeAt(r),x(e))++r;else if(N(e))++r,e===13&&o.charCodeAt(r)===10&&++r,++g,O=r,t=!0;else if(e===47)if(e=o.charCodeAt(r+1),e===47)++r,++r,Y(2),t=!0;else if(e===42)++r,++r,me();else break;else if(t&&e===45)if(o.charCodeAt(r+1)===45&&o.charCodeAt(r+2)===62)r+=3,Y(3);else break;else if(e===60)if(o.slice(r+1,r+4)==="!--")++r,++r,++r,++r,Y(4);else break;else break}function T(e){var t,i,u,I=0;for(i=e==="u"?4:2,t=0;t<i;++t)if(r<h&&k(o[r]))u=o[r++],I=I*16+"0123456789abcdef".indexOf(u.toLowerCase());else return"";return String.fromCharCode(I)}function M(){var e,t;for(e=o.charCodeAt(r++),t=String.fromCharCode(e),e===92&&(o.charCodeAt(r)!==117&&W({},s.UnexpectedToken,"ILLEGAL"),++r,e=T("u"),(!e||e==="\\"||!D(e.charCodeAt(0)))&&W({},s.UnexpectedToken,"ILLEGAL"),t=e);r<h&&(e=o.charCodeAt(r),!!$(e));)++r,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),o.charCodeAt(r)!==117&&W({},s.UnexpectedToken,"ILLEGAL"),++r,e=T("u"),(!e||e==="\\"||!$(e.charCodeAt(0)))&&W({},s.UnexpectedToken,"ILLEGAL"),t+=e);return t}function Q(){var e,t;for(e=r++;r<h;){if(t=o.charCodeAt(r),t===92)return r=e,M();if($(t))++r;else break}return o.slice(e,r)}function ie(){var e,t,i;return e=r,t=o.charCodeAt(r)===92?M():Q(),t.length===1?i=y.Identifier:ee(t)?i=y.Keyword:t==="null"?i=y.NullLiteral:t==="true"||t==="false"?i=y.BooleanLiteral:i=y.Identifier,{type:i,value:t,lineNumber:g,lineStart:O,start:e,end:r}}function H(){var e=r,t=o.charCodeAt(r),i,u=o[r],I,A,G;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++r,f.tokenize&&(t===40?f.openParenToken=f.tokens.length:t===123&&(f.openCurlyToken=f.tokens.length)),{type:y.Punctuator,value:String.fromCharCode(t),lineNumber:g,lineStart:O,start:e,end:r};default:if(i=o.charCodeAt(r+1),i===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return r+=2,{type:y.Punctuator,value:String.fromCharCode(t)+String.fromCharCode(i),lineNumber:g,lineStart:O,start:e,end:r};case 33:case 61:return r+=2,o.charCodeAt(r)===61&&++r,{type:y.Punctuator,value:o.slice(e,r),lineNumber:g,lineStart:O,start:e,end:r}}}if(G=o.substr(r,4),G===">>>=")return r+=4,{type:y.Punctuator,value:G,lineNumber:g,lineStart:O,start:e,end:r};if(A=G.substr(0,3),A===">>>"||A==="<<="||A===">>=")return r+=3,{type:y.Punctuator,value:A,lineNumber:g,lineStart:O,start:e,end:r};if(I=A.substr(0,2),u===I[1]&&"+-<>&|".indexOf(u)>=0||I==="=>")return r+=2,{type:y.Punctuator,value:I,lineNumber:g,lineStart:O,start:e,end:r};if("<>=!+-*%&|^/".indexOf(u)>=0)return++r,{type:y.Punctuator,value:u,lineNumber:g,lineStart:O,start:e,end:r};W({},s.UnexpectedToken,"ILLEGAL")}function j(e){for(var t="";r<h&&k(o[r]);)t+=o[r++];return t.length===0&&W({},s.UnexpectedToken,"ILLEGAL"),D(o.charCodeAt(r))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:y.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:g,lineStart:O,start:e,end:r}}function Z(e){for(var t="0"+o[r++];r<h&&w(o[r]);)t+=o[r++];return(D(o.charCodeAt(r))||E(o.charCodeAt(r)))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:y.NumericLiteral,value:parseInt(t,8),octal:!0,lineNumber:g,lineStart:O,start:e,end:r}}function te(){var e,t,i;if(i=o[r],m(E(i.charCodeAt(0))||i===".","Numeric literal must start with a decimal digit or a decimal point"),t=r,e="",i!=="."){if(e=o[r++],i=o[r],e==="0"){if(i==="x"||i==="X")return++r,j(t);if(w(i))return Z(t);i&&E(i.charCodeAt(0))&&W({},s.UnexpectedToken,"ILLEGAL")}for(;E(o.charCodeAt(r));)e+=o[r++];i=o[r]}if(i==="."){for(e+=o[r++];E(o.charCodeAt(r));)e+=o[r++];i=o[r]}if(i==="e"||i==="E")if(e+=o[r++],i=o[r],(i==="+"||i==="-")&&(e+=o[r++]),E(o.charCodeAt(r)))for(;E(o.charCodeAt(r));)e+=o[r++];else W({},s.UnexpectedToken,"ILLEGAL");return D(o.charCodeAt(r))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:y.NumericLiteral,value:parseFloat(e),lineNumber:g,lineStart:O,start:t,end:r}}function ce(){var e="",t,i,u,I,A,G,X=!1,le,se;for(le=g,se=O,t=o[r],m(t==="'"||t==='"',"String literal must starts with a quote"),i=r,++r;r<h;)if(u=o[r++],u===t){t="";break}else if(u==="\\")if(u=o[r++],!u||!N(u.charCodeAt(0)))switch(u){case"u":case"x":G=r,A=T(u),A?e+=A:(r=G,e+=u);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:w(u)?(I="01234567".indexOf(u),I!==0&&(X=!0),r<h&&w(o[r])&&(X=!0,I=I*8+"01234567".indexOf(o[r++]),"0123".indexOf(u)>=0&&r<h&&w(o[r])&&(I=I*8+"01234567".indexOf(o[r++]))),e+=String.fromCharCode(I)):e+=u;break}else++g,u==="\r"&&o[r]===`
`&&++r,O=r;else{if(N(u.charCodeAt(0)))break;e+=u}return t!==""&&W({},s.UnexpectedToken,"ILLEGAL"),{type:y.StringLiteral,value:e,octal:X,startLineNumber:le,startLineStart:se,lineNumber:g,lineStart:O,start:i,end:r}}function ve(e,t){var i;try{i=new RegExp(e,t)}catch{W({},s.InvalidRegExp)}return i}function Oe(){var e,t,i,u,I;for(e=o[r],m(e==="/","Regular expression literal must start with a slash"),t=o[r++],i=!1,u=!1;r<h;)if(e=o[r++],t+=e,e==="\\")e=o[r++],N(e.charCodeAt(0))&&W({},s.UnterminatedRegExp),t+=e;else if(N(e.charCodeAt(0)))W({},s.UnterminatedRegExp);else if(i)e==="]"&&(i=!1);else if(e==="/"){u=!0;break}else e==="["&&(i=!0);return u||W({},s.UnterminatedRegExp),I=t.substr(1,t.length-2),{value:I,literal:t}}function Ee(){var e,t,i,u;for(t="",i="";r<h&&(e=o[r],!!$(e.charCodeAt(0)));)if(++r,e==="\\"&&r<h)if(e=o[r],e==="u"){if(++r,u=r,e=T("u"),e)for(i+=e,t+="\\u";u<r;++u)t+=o[u];else r=u,i+="u",t+="\\u";V({},s.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},s.UnexpectedToken,"ILLEGAL");else i+=e,t+=e;return{value:i,literal:t}}function we(){var e,t,i,u;return a=null,b(),e=r,t=Oe(),i=Ee(),u=ve(t.value,i.value),f.tokenize?{type:y.RegularExpression,value:u,lineNumber:g,lineStart:O,start:e,end:r}:{literal:t.literal+i.literal,value:u,start:e,end:r}}function ye(){var e,t,i,u;return b(),e=r,t={start:{line:g,column:r-O}},i=we(),t.end={line:g,column:r-O},f.tokenize||(f.tokens.length>0&&(u=f.tokens[f.tokens.length-1],u.range[0]===e&&u.type==="Punctuator"&&(u.value==="/"||u.value==="/=")&&f.tokens.pop()),f.tokens.push({type:"RegularExpression",value:i.literal,range:[e,r],loc:t})),i}function Je(e){return e.type===y.Identifier||e.type===y.Keyword||e.type===y.BooleanLiteral||e.type===y.NullLiteral}function Qe(){var e,t;if(e=f.tokens[f.tokens.length-1],!e)return ye();if(e.type==="Punctuator"){if(e.value==="]")return H();if(e.value===")")return t=f.tokens[f.openParenToken-1],t&&t.type==="Keyword"&&(t.value==="if"||t.value==="while"||t.value==="for"||t.value==="with")?ye():H();if(e.value==="}"){if(f.tokens[f.openCurlyToken-3]&&f.tokens[f.openCurlyToken-3].type==="Keyword"){if(t=f.tokens[f.openCurlyToken-4],!t)return H()}else if(f.tokens[f.openCurlyToken-4]&&f.tokens[f.openCurlyToken-4].type==="Keyword"){if(t=f.tokens[f.openCurlyToken-5],!t)return ye()}else return H();return C.indexOf(t.value)>=0?H():ye()}return ye()}return e.type==="Keyword"?ye():H()}function Le(){var e;return b(),r>=h?{type:y.EOF,lineNumber:g,lineStart:O,start:r,end:r}:(e=o.charCodeAt(r),D(e)?ie():e===40||e===41||e===59?H():e===39||e===34?ce():e===46?E(o.charCodeAt(r+1))?te():H():E(e)?te():f.tokenize&&e===47?Qe():H())}function Me(){var e,t,i;return b(),e={start:{line:g,column:r-O}},t=Le(),e.end={line:g,column:r-O},t.type!==y.EOF&&(i=o.slice(t.start,t.end),f.tokens.push({type:L[t.type],value:i,range:[t.start,t.end],loc:e})),t}function q(){var e;return e=a,r=e.end,g=e.lineNumber,O=e.lineStart,a=typeof f.tokens<"u"?Me():Le(),r=e.end,g=e.lineNumber,O=e.lineStart,e}function Ne(){var e,t,i;e=r,t=g,i=O,a=typeof f.tokens<"u"?Me():Le(),r=e,g=t,O=i}function Fe(e,t){this.line=e,this.column=t}function Ye(e,t,i,u){this.start=new Fe(e,t),this.end=new Fe(i,u)}d={name:"SyntaxTree",processComment:function(e){var t,i;if(!(e.type===S.Program&&e.body.length>0)){for(f.trailingComments.length>0?f.trailingComments[0].range[0]>=e.range[1]?(i=f.trailingComments,f.trailingComments=[]):f.trailingComments.length=0:f.bottomRightStack.length>0&&f.bottomRightStack[f.bottomRightStack.length-1].trailingComments&&f.bottomRightStack[f.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(i=f.bottomRightStack[f.bottomRightStack.length-1].trailingComments,delete f.bottomRightStack[f.bottomRightStack.length-1].trailingComments);f.bottomRightStack.length>0&&f.bottomRightStack[f.bottomRightStack.length-1].range[0]>=e.range[0];)t=f.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):f.leadingComments.length>0&&f.leadingComments[f.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=f.leadingComments,f.leadingComments=[]),i&&(e.trailingComments=i),f.bottomRightStack.push(e)}},markEnd:function(e,t){return f.range&&(e.range=[t.start,r]),f.loc&&(e.loc=new Ye(t.startLineNumber===void 0?t.lineNumber:t.startLineNumber,t.start-(t.startLineStart===void 0?t.lineStart:t.startLineStart),g,r-O),this.postProcess(e)),f.attachComment&&this.processComment(e),e},postProcess:function(e){return f.source&&(e.loc.source=f.source),e},createArrayExpression:function(e){return{type:S.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,i){return{type:S.AssignmentExpression,operator:e,left:t,right:i}},createBinaryExpression:function(e,t,i){var u=e==="||"||e==="&&"?S.LogicalExpression:S.BinaryExpression;return{type:u,operator:e,left:t,right:i}},createBlockStatement:function(e){return{type:S.BlockStatement,body:e}},createBreakStatement:function(e){return{type:S.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:S.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:S.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,i){return{type:S.ConditionalExpression,test:e,consequent:t,alternate:i}},createContinueStatement:function(e){return{type:S.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:S.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:S.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:S.EmptyStatement}},createExpressionStatement:function(e){return{type:S.ExpressionStatement,expression:e}},createForStatement:function(e,t,i,u){return{type:S.ForStatement,init:e,test:t,update:i,body:u}},createForInStatement:function(e,t,i){return{type:S.ForInStatement,left:e,right:t,body:i,each:!1}},createFunctionDeclaration:function(e,t,i,u){return{type:S.FunctionDeclaration,id:e,params:t,defaults:i,body:u,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,i,u){return{type:S.FunctionExpression,id:e,params:t,defaults:i,body:u,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:S.Identifier,name:e}},createIfStatement:function(e,t,i){return{type:S.IfStatement,test:e,consequent:t,alternate:i}},createLabeledStatement:function(e,t){return{type:S.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:S.Literal,value:e.value,raw:o.slice(e.start,e.end)}},createMemberExpression:function(e,t,i){return{type:S.MemberExpression,computed:e==="[",object:t,property:i}},createNewExpression:function(e,t){return{type:S.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:S.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:S.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:S.Program,body:e}},createProperty:function(e,t,i){return{type:S.Property,key:t,value:i,kind:e}},createReturnStatement:function(e){return{type:S.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:S.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:S.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:S.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:S.ThisExpression}},createThrowStatement:function(e){return{type:S.ThrowStatement,argument:e}},createTryStatement:function(e,t,i,u){return{type:S.TryStatement,block:e,guardedHandlers:t,handlers:i,finalizer:u}},createUnaryExpression:function(e,t){return e==="++"||e==="--"?{type:S.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:S.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:S.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:S.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:S.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:S.WithStatement,object:e,body:t}}};function be(){var e,t,i,u;return e=r,t=g,i=O,b(),u=g!==t,r=e,g=t,O=i,u}function W(e,t){var i,u=Array.prototype.slice.call(arguments,2),I=t.replace(/%(\d)/g,function(A,G){return m(G<u.length,"Message reference must be in range"),u[G]});throw typeof e.lineNumber=="number"?(i=new Error("Line "+e.lineNumber+": "+I),i.index=e.start,i.lineNumber=e.lineNumber,i.column=e.start-O+1):(i=new Error("Line "+g+": "+I),i.index=r,i.lineNumber=g,i.column=r-O+1),i.description=I,i}function V(){try{W.apply(null,arguments)}catch(e){if(f.errors)f.errors.push(e);else throw e}}function fe(e){if(e.type===y.EOF&&W(e,s.UnexpectedEOS),e.type===y.NumericLiteral&&W(e,s.UnexpectedNumber),e.type===y.StringLiteral&&W(e,s.UnexpectedString),e.type===y.Identifier&&W(e,s.UnexpectedIdentifier),e.type===y.Keyword){if(J(e.value))W(e,s.UnexpectedReserved);else if(c&&z(e.value)){V(e,s.StrictReservedWord);return}W(e,s.UnexpectedToken,e.value)}W(e,s.UnexpectedToken,e.value)}function U(e){var t=q();(t.type!==y.Punctuator||t.value!==e)&&fe(t)}function re(e){var t=q();(t.type!==y.Keyword||t.value!==e)&&fe(t)}function B(e){return a.type===y.Punctuator&&a.value===e}function oe(e){return a.type===y.Keyword&&a.value===e}function Ze(){var e;return a.type!==y.Punctuator?!1:(e=a.value,e==="="||e==="*="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|=")}function pe(){var e;if(o.charCodeAt(r)===59||B(";")){q();return}e=g,b(),g===e&&a.type!==y.EOF&&!B("}")&&fe(a)}function Ie(e){return e.type===S.Identifier||e.type===S.MemberExpression}function et(){var e=[],t;for(t=a,U("[");!B("]");)B(",")?(q(),e.push(null)):(e.push(ue()),B("]")||U(","));return q(),n.markEnd(n.createArrayExpression(e),t)}function Ae(e,t){var i,u,I;return i=c,I=a,u=Re(),t&&c&&K(e[0].name)&&V(t,s.StrictParamName),c=i,n.markEnd(n.createFunctionExpression(null,e,[],u),I)}function Ce(){var e,t;return t=a,e=q(),e.type===y.StringLiteral||e.type===y.NumericLiteral?(c&&e.octal&&V(e,s.StrictOctalLiteral),n.markEnd(n.createLiteral(e),t)):n.markEnd(n.createIdentifier(e.value),t)}function tt(){var e,t,i,u,I,A;if(e=a,A=a,e.type===y.Identifier)return i=Ce(),e.value==="get"&&!B(":")?(t=Ce(),U("("),U(")"),u=Ae([]),n.markEnd(n.createProperty("get",t,u),A)):e.value==="set"&&!B(":")?(t=Ce(),U("("),e=a,e.type!==y.Identifier?(U(")"),V(e,s.UnexpectedToken,e.value),u=Ae([])):(I=[de()],U(")"),u=Ae(I,e)),n.markEnd(n.createProperty("set",t,u),A)):(U(":"),u=ue(),n.markEnd(n.createProperty("init",i,u),A));if(e.type===y.EOF||e.type===y.Punctuator)fe(e);else return t=Ce(),U(":"),u=ue(),n.markEnd(n.createProperty("init",t,u),A)}function rt(){var e=[],t,i,u,I,A={},G=String,X;for(X=a,U("{");!B("}");)t=tt(),t.key.type===S.Identifier?i=t.key.name:i=G(t.key.value),I=t.kind==="init"?v.Data:t.kind==="get"?v.Get:v.Set,u="$"+i,Object.prototype.hasOwnProperty.call(A,u)?(A[u]===v.Data?c&&I===v.Data?V({},s.StrictDuplicateProperty):I!==v.Data&&V({},s.AccessorDataProperty):I===v.Data?V({},s.AccessorDataProperty):A[u]&I&&V({},s.AccessorGetSet),A[u]|=I):A[u]=I,e.push(t),B("}")||U(",");return U("}"),n.markEnd(n.createObjectExpression(e),X)}function nt(){var e;return U("("),e=ae(),U(")"),e}function Be(){var e,t,i,u;if(B("("))return nt();if(B("["))return et();if(B("{"))return rt();if(e=a.type,u=a,e===y.Identifier)i=n.createIdentifier(q().value);else if(e===y.StringLiteral||e===y.NumericLiteral)c&&a.octal&&V(a,s.StrictOctalLiteral),i=n.createLiteral(q());else if(e===y.Keyword){if(oe("function"))return Lt();oe("this")?(q(),i=n.createThisExpression()):fe(q())}else e===y.BooleanLiteral?(t=q(),t.value=t.value==="true",i=n.createLiteral(t)):e===y.NullLiteral?(t=q(),t.value=null,i=n.createLiteral(t)):B("/")||B("/=")?(typeof f.tokens<"u"?i=n.createLiteral(ye()):i=n.createLiteral(we()),Ne()):fe(q());return n.markEnd(i,u)}function Ue(){var e=[];if(U("("),!B(")"))for(;r<h&&(e.push(ue()),!B(")"));)U(",");return U(")"),e}function it(){var e,t;return t=a,e=q(),Je(e)||fe(e),n.markEnd(n.createIdentifier(e.value),t)}function $e(){return U("."),it()}function qe(){var e;return U("["),e=ae(),U("]"),e}function We(){var e,t,i;return i=a,re("new"),e=st(),t=B("(")?Ue():[],n.markEnd(n.createNewExpression(e,t),i)}function at(){var e,t,i,u,I;for(I=a,e=p.allowIn,p.allowIn=!0,t=oe("new")?We():Be(),p.allowIn=e;;){if(B("."))u=$e(),t=n.createMemberExpression(".",t,u);else if(B("("))i=Ue(),t=n.createCallExpression(t,i);else if(B("["))u=qe(),t=n.createMemberExpression("[",t,u);else break;n.markEnd(t,I)}return t}function st(){var e,t,i,u;for(u=a,e=p.allowIn,t=oe("new")?We():Be(),p.allowIn=e;B(".")||B("[");)B("[")?(i=qe(),t=n.createMemberExpression("[",t,i)):(i=$e(),t=n.createMemberExpression(".",t,i)),n.markEnd(t,u);return t}function Ge(){var e,t,i=a;return e=at(),a.type===y.Punctuator&&(B("++")||B("--"))&&!be()&&(c&&e.type===S.Identifier&&K(e.name)&&V({},s.StrictLHSPostfix),Ie(e)||V({},s.InvalidLHSInAssignment),t=q(),e=n.markEnd(n.createPostfixExpression(t.value,e),i)),e}function Se(){var e,t,i;return a.type!==y.Punctuator&&a.type!==y.Keyword?t=Ge():B("++")||B("--")?(i=a,e=q(),t=Se(),c&&t.type===S.Identifier&&K(t.name)&&V({},s.StrictLHSPrefix),Ie(t)||V({},s.InvalidLHSInAssignment),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,i)):B("+")||B("-")||B("~")||B("!")?(i=a,e=q(),t=Se(),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,i)):oe("delete")||oe("void")||oe("typeof")?(i=a,e=q(),t=Se(),t=n.createUnaryExpression(e.value,t),t=n.markEnd(t,i),c&&t.operator==="delete"&&t.argument.type===S.Identifier&&V({},s.StrictDelete)):t=Ge(),t}function ze(e,t){var i=0;if(e.type!==y.Punctuator&&e.type!==y.Keyword)return 0;switch(e.value){case"||":i=1;break;case"&&":i=2;break;case"|":i=3;break;case"^":i=4;break;case"&":i=5;break;case"==":case"!=":case"===":case"!==":i=6;break;case"<":case">":case"<=":case">=":case"instanceof":i=7;break;case"in":i=t?7:0;break;case"<<":case">>":case">>>":i=8;break;case"+":case"-":i=9;break;case"*":case"/":case"%":i=11;break}return i}function ot(){var e,t,i,u,I,A,G,X,le,se;if(e=a,le=Se(),u=a,I=ze(u,p.allowIn),I===0)return le;for(u.prec=I,q(),t=[e,a],G=Se(),A=[le,u,G];(I=ze(a,p.allowIn))>0;){for(;A.length>2&&I<=A[A.length-2].prec;)G=A.pop(),X=A.pop().value,le=A.pop(),i=n.createBinaryExpression(X,le,G),t.pop(),e=t[t.length-1],n.markEnd(i,e),A.push(i);u=q(),u.prec=I,A.push(u),t.push(a),i=Se(),A.push(i)}for(se=A.length-1,i=A[se],t.pop();se>1;)i=n.createBinaryExpression(A[se-1].value,A[se-2],i),se-=2,e=t.pop(),n.markEnd(i,e);return i}function lt(){var e,t,i,u,I;return I=a,e=ot(),B("?")&&(q(),t=p.allowIn,p.allowIn=!0,i=ue(),p.allowIn=t,U(":"),u=ue(),e=n.createConditionalExpression(e,i,u),n.markEnd(e,I)),e}function ue(){var e,t,i,u,I;return e=a,I=a,u=t=lt(),Ze()&&(Ie(t)||V({},s.InvalidLHSInAssignment),c&&t.type===S.Identifier&&K(t.name)&&V(e,s.StrictLHSAssignment),e=q(),i=ue(),u=n.markEnd(n.createAssignmentExpression(e.value,t,i),I)),u}function ae(){var e,t=a;if(e=ue(),B(",")){for(e=n.createSequenceExpression([e]);r<h&&B(",");)q(),e.expressions.push(ue());n.markEnd(e,t)}return e}function ut(){for(var e=[],t;r<h&&!(B("}")||(t=ke(),typeof t>"u"));)e.push(t);return e}function _e(){var e,t;return t=a,U("{"),e=ut(),U("}"),n.markEnd(n.createBlockStatement(e),t)}function de(){var e,t;return t=a,e=q(),e.type!==y.Identifier&&fe(e),n.markEnd(n.createIdentifier(e.value),t)}function ct(e){var t=null,i,u;return u=a,i=de(),c&&K(i.name)&&V({},s.StrictVarName),e==="const"?(U("="),t=ue()):B("=")&&(q(),t=ue()),n.markEnd(n.createVariableDeclarator(i,t),u)}function Pe(e){var t=[];do{if(t.push(ct(e)),!B(","))break;q()}while(r<h);return t}function ft(){var e;return re("var"),e=Pe(),pe(),n.createVariableDeclaration(e,"var")}function pt(e){var t,i;return i=a,re(e),t=Pe(e),pe(),n.markEnd(n.createVariableDeclaration(t,e),i)}function ht(){return U(";"),n.createEmptyStatement()}function mt(){var e=ae();return pe(),n.createExpressionStatement(e)}function dt(){var e,t,i;return re("if"),U("("),e=ae(),U(")"),t=he(),oe("else")?(q(),i=he()):i=null,n.createIfStatement(e,t,i)}function yt(){var e,t,i;return re("do"),i=p.inIteration,p.inIteration=!0,e=he(),p.inIteration=i,re("while"),U("("),t=ae(),U(")"),B(";")&&q(),n.createDoWhileStatement(e,t)}function gt(){var e,t,i;return re("while"),U("("),e=ae(),U(")"),i=p.inIteration,p.inIteration=!0,t=he(),p.inIteration=i,n.createWhileStatement(e,t)}function vt(){var e,t,i;return i=a,e=q(),t=Pe(),n.markEnd(n.createVariableDeclaration(t,e.value),i)}function St(){var e,t,i,u,I,A,G;return e=t=i=null,re("for"),U("("),B(";")?q():(oe("var")||oe("let")?(p.allowIn=!1,e=vt(),p.allowIn=!0,e.declarations.length===1&&oe("in")&&(q(),u=e,I=ae(),e=null)):(p.allowIn=!1,e=ae(),p.allowIn=!0,oe("in")&&(Ie(e)||V({},s.InvalidLHSInForIn),q(),u=e,I=ae(),e=null)),typeof u>"u"&&U(";")),typeof u>"u"&&(B(";")||(t=ae()),U(";"),B(")")||(i=ae())),U(")"),G=p.inIteration,p.inIteration=!0,A=he(),p.inIteration=G,typeof u>"u"?n.createForStatement(e,t,i,A):n.createForInStatement(u,I,A)}function Et(){var e=null,t;return re("continue"),o.charCodeAt(r)===59?(q(),p.inIteration||W({},s.IllegalContinue),n.createContinueStatement(null)):be()?(p.inIteration||W({},s.IllegalContinue),n.createContinueStatement(null)):(a.type===y.Identifier&&(e=de(),t="$"+e.name,Object.prototype.hasOwnProperty.call(p.labelSet,t)||W({},s.UnknownLabel,e.name)),pe(),e===null&&!p.inIteration&&W({},s.IllegalContinue),n.createContinueStatement(e))}function bt(){var e=null,t;return re("break"),o.charCodeAt(r)===59?(q(),p.inIteration||p.inSwitch||W({},s.IllegalBreak),n.createBreakStatement(null)):be()?(p.inIteration||p.inSwitch||W({},s.IllegalBreak),n.createBreakStatement(null)):(a.type===y.Identifier&&(e=de(),t="$"+e.name,Object.prototype.hasOwnProperty.call(p.labelSet,t)||W({},s.UnknownLabel,e.name)),pe(),e===null&&!(p.inIteration||p.inSwitch)&&W({},s.IllegalBreak),n.createBreakStatement(e))}function kt(){var e=null;return re("return"),p.inFunctionBody||V({},s.IllegalReturn),o.charCodeAt(r)===32&&D(o.charCodeAt(r+1))?(e=ae(),pe(),n.createReturnStatement(e)):be()?n.createReturnStatement(null):(B(";")||!B("}")&&a.type!==y.EOF&&(e=ae()),pe(),n.createReturnStatement(e))}function xt(){var e,t;return c&&(b(),V({},s.StrictModeWith)),re("with"),U("("),e=ae(),U(")"),t=he(),n.createWithStatement(e,t)}function wt(){var e,t=[],i,u;for(u=a,oe("default")?(q(),e=null):(re("case"),e=ae()),U(":");r<h&&!(B("}")||oe("default")||oe("case"));)i=he(),t.push(i);return n.markEnd(n.createSwitchCase(e,t),u)}function It(){var e,t,i,u,I;if(re("switch"),U("("),e=ae(),U(")"),U("{"),t=[],B("}"))return q(),n.createSwitchStatement(e,t);for(u=p.inSwitch,p.inSwitch=!0,I=!1;r<h&&!B("}");)i=wt(),i.test===null&&(I&&W({},s.MultipleDefaultsInSwitch),I=!0),t.push(i);return p.inSwitch=u,U("}"),n.createSwitchStatement(e,t)}function Ct(){var e;return re("throw"),be()&&W({},s.NewlineAfterThrow),e=ae(),pe(),n.createThrowStatement(e)}function _t(){var e,t,i;return i=a,re("catch"),U("("),B(")")&&fe(a),e=de(),c&&K(e.name)&&V({},s.StrictCatchVariable),U(")"),t=_e(),n.markEnd(n.createCatchClause(e,t),i)}function Tt(){var e,t=[],i=null;return re("try"),e=_e(),oe("catch")&&t.push(_t()),oe("finally")&&(q(),i=_e()),t.length===0&&!i&&W({},s.NoCatchOrFinally),n.createTryStatement(e,[],t,i)}function Ot(){return re("debugger"),pe(),n.createDebuggerStatement()}function he(){var e=a.type,t,i,u,I;if(e===y.EOF&&fe(a),e===y.Punctuator&&a.value==="{")return _e();if(I=a,e===y.Punctuator)switch(a.value){case";":return n.markEnd(ht(),I);case"(":return n.markEnd(mt(),I)}if(e===y.Keyword)switch(a.value){case"break":return n.markEnd(bt(),I);case"continue":return n.markEnd(Et(),I);case"debugger":return n.markEnd(Ot(),I);case"do":return n.markEnd(yt(),I);case"for":return n.markEnd(St(),I);case"function":return n.markEnd(Ke(),I);case"if":return n.markEnd(dt(),I);case"return":return n.markEnd(kt(),I);case"switch":return n.markEnd(It(),I);case"throw":return n.markEnd(Ct(),I);case"try":return n.markEnd(Tt(),I);case"var":return n.markEnd(ft(),I);case"while":return n.markEnd(gt(),I);case"with":return n.markEnd(xt(),I)}return t=ae(),t.type===S.Identifier&&B(":")?(q(),u="$"+t.name,Object.prototype.hasOwnProperty.call(p.labelSet,u)&&W({},s.Redeclaration,"Label",t.name),p.labelSet[u]=!0,i=he(),delete p.labelSet[u],n.markEnd(n.createLabeledStatement(t,i),I)):(pe(),n.markEnd(n.createExpressionStatement(t),I))}function Re(){var e,t=[],i,u,I,A,G,X,le,se;for(se=a,U("{");r<h&&!(a.type!==y.StringLiteral||(i=a,e=ke(),t.push(e),e.expression.type!==S.Literal));)u=o.slice(i.start+1,i.end-1),u==="use strict"?(c=!0,I&&V(I,s.StrictOctalLiteral)):!I&&i.octal&&(I=i);for(A=p.labelSet,G=p.inIteration,X=p.inSwitch,le=p.inFunctionBody,p.labelSet={},p.inIteration=!1,p.inSwitch=!1,p.inFunctionBody=!0;r<h&&!(B("}")||(e=ke(),typeof e>"u"));)t.push(e);return U("}"),p.labelSet=A,p.inIteration=G,p.inSwitch=X,p.inFunctionBody=le,n.markEnd(n.createBlockStatement(t),se)}function He(e){var t,i=[],u,I,A,G,X;if(U("("),!B(")"))for(A={};r<h&&(u=a,t=de(),G="$"+u.value,c?(K(u.value)&&(I=u,X=s.StrictParamName),Object.prototype.hasOwnProperty.call(A,G)&&(I=u,X=s.StrictParamDupe)):e||(K(u.value)?(e=u,X=s.StrictParamName):z(u.value)?(e=u,X=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(A,G)&&(e=u,X=s.StrictParamDupe)),i.push(t),A[G]=!0,!B(")"));)U(",");return U(")"),{params:i,stricted:I,firstRestricted:e,message:X}}function Ke(){var e,t=[],i,u,I,A,G,X,le,se;return se=a,re("function"),u=a,e=de(),c?K(u.value)&&V(u,s.StrictFunctionName):K(u.value)?(G=u,X=s.StrictFunctionName):z(u.value)&&(G=u,X=s.StrictReservedWord),A=He(G),t=A.params,I=A.stricted,G=A.firstRestricted,A.message&&(X=A.message),le=c,i=Re(),c&&G&&W(G,X),c&&I&&V(I,X),c=le,n.markEnd(n.createFunctionDeclaration(e,t,[],i),se)}function Lt(){var e,t=null,i,u,I,A,G=[],X,le,se;return se=a,re("function"),B("(")||(e=a,t=de(),c?K(e.value)&&V(e,s.StrictFunctionName):K(e.value)?(u=e,I=s.StrictFunctionName):z(e.value)&&(u=e,I=s.StrictReservedWord)),A=He(u),G=A.params,i=A.stricted,u=A.firstRestricted,A.message&&(I=A.message),le=c,X=Re(),c&&u&&W(u,I),c&&i&&V(i,I),c=le,n.markEnd(n.createFunctionExpression(t,G,[],X),se)}function ke(){if(a.type===y.Keyword)switch(a.value){case"const":case"let":return pt(a.value);case"function":return Ke();default:return he()}if(a.type!==y.EOF)return he()}function Nt(){for(var e,t=[],i,u,I;r<h&&(i=a,!(i.type!==y.StringLiteral||(e=ke(),t.push(e),e.expression.type!==S.Literal)));)u=o.slice(i.start+1,i.end-1),u==="use strict"?(c=!0,I&&V(I,s.StrictOctalLiteral)):!I&&i.octal&&(I=i);for(;r<h&&(e=ke(),!(typeof e>"u"));)t.push(e);return t}function At(){var e,t;return b(),Ne(),t=a,c=!1,e=Nt(),n.markEnd(n.createProgram(e),t)}function je(){var e,t,i,u=[];for(e=0;e<f.tokens.length;++e)t=f.tokens[e],i={type:t.type,value:t.value},f.range&&(i.range=t.range),f.loc&&(i.loc=t.loc),u.push(i);f.tokens=u}function Pt(e,t){var i,u,I;i=String,typeof e!="string"&&!(e instanceof String)&&(e=i(e)),n=d,o=e,r=0,g=o.length>0?1:0,O=0,h=o.length,a=null,p={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},f={},t=t||{},t.tokens=!0,f.tokens=[],f.tokenize=!0,f.openParenToken=-1,f.openCurlyToken=-1,f.range=typeof t.range=="boolean"&&t.range,f.loc=typeof t.loc=="boolean"&&t.loc,typeof t.comment=="boolean"&&t.comment&&(f.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(f.errors=[]);try{if(Ne(),a.type===y.EOF)return f.tokens;for(u=q();a.type!==y.EOF;)try{u=q()}catch(A){if(u=a,f.errors){f.errors.push(A);break}else throw A}je(),I=f.tokens,typeof f.comments<"u"&&(I.comments=f.comments),typeof f.errors<"u"&&(I.errors=f.errors)}catch(A){throw A}finally{f={}}return I}function Rt(e,t){var i,u;u=String,typeof e!="string"&&!(e instanceof String)&&(e=u(e)),n=d,o=e,r=0,g=o.length>0?1:0,O=0,h=o.length,a=null,p={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},f={},typeof t<"u"&&(f.range=typeof t.range=="boolean"&&t.range,f.loc=typeof t.loc=="boolean"&&t.loc,f.attachComment=typeof t.attachComment=="boolean"&&t.attachComment,f.loc&&t.source!==null&&t.source!==void 0&&(f.source=u(t.source)),typeof t.tokens=="boolean"&&t.tokens&&(f.tokens=[]),typeof t.comment=="boolean"&&t.comment&&(f.comments=[]),typeof t.tolerant=="boolean"&&t.tolerant&&(f.errors=[]),f.attachComment&&(f.range=!0,f.comments=[],f.bottomRightStack=[],f.trailingComments=[],f.leadingComments=[]));try{i=At(),typeof f.comments<"u"&&(i.comments=f.comments),typeof f.tokens<"u"&&(je(),i.tokens=f.tokens),typeof f.errors<"u"&&(i.errors=f.errors)}catch(I){throw I}finally{f={}}return i}_.version="1.2.2",_.tokenize=Pt,_.parse=Rt,_.Syntax=(function(){var e,t={};typeof Object.create=="function"&&(t=Object.create(null));for(e in S)S.hasOwnProperty(e)&&(t[e]=S[e]);return typeof Object.freeze=="function"&&Object.freeze(t),t})()})},{}],1:[function(F,R,P){(function(_){var y=(function(){var L={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(l,d,o,c,r,g,O){c.ast||(c.ast=C,C.initialize());var h=g.length-1;switch(r){case 1:return c.ast.set({expression:{type:"root",value:g[h]}}),c.ast.unshift(),c.ast.yield();case 2:return c.ast.set({expression:{type:"root",value:g[h-1]}}),c.ast.unshift(),c.ast.yield();case 3:return c.ast.unshift(),c.ast.yield();case 4:return c.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:g[h-1]}}),c.ast.unshift(),c.ast.yield();case 5:break;case 6:break;case 7:c.ast.set({operation:"member"}),c.ast.push();break;case 8:c.ast.set({operation:"subscript"}),c.ast.push();break;case 9:c.ast.set({scope:"child"});break;case 10:c.ast.set({scope:"descendant"});break;case 11:break;case 12:c.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:c.ast.set({expression:{type:"wildcard",value:g[h]}});break;case 15:c.ast.set({expression:{type:"identifier",value:g[h]}});break;case 16:c.ast.set({expression:{type:"script_expression",value:g[h]}});break;case 17:c.ast.set({expression:{type:"numeric_literal",value:parseInt(g[h])}});break;case 18:break;case 19:c.ast.set({scope:"child"});break;case 20:c.ast.set({scope:"descendant"});break;case 21:break;case 22:break;case 23:break;case 24:g[h].length>1?c.ast.set({expression:{type:"union",value:g[h]}}):this.$=g[h];break;case 25:this.$=[g[h]];break;case 26:this.$=g[h-2].concat(g[h]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(g[h])}},c.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:g[h]}},c.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:g[h]}},c.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:g[h]}},c.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:g[h]}},c.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:g[h]}},c.ast.set(this.$);break;case 33:this.$=g[h];break;case 34:this.$=g[h];break}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(l,d){if(d.recoverable)this.trace(l);else throw new Error(l)},parse:function(l){var d=this,o=[0],c=[null],r=[],g=this.table,O="",h=0,n=0,a=2,p=1,f=r.slice.call(arguments,1);this.lexer.setInput(l),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;r.push(m);var E=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function k(){var Y;return Y=d.lexer.lex()||p,typeof Y!="number"&&(Y=d.symbols_[Y]||Y),Y}for(var w,x,N,D,$={},J,z,K,ee;;){if(x=o[o.length-1],this.defaultActions[x]?N=this.defaultActions[x]:((w===null||typeof w>"u")&&(w=k()),N=g[x]&&g[x][w]),typeof N>"u"||!N.length||!N[0]){var ne="";ee=[];for(J in g[x])this.terminals_[J]&&J>a&&ee.push("'"+this.terminals_[J]+"'");this.lexer.showPosition?ne="Parse error on line "+(h+1)+`:
`+this.lexer.showPosition()+`
Expecting `+ee.join(", ")+", got '"+(this.terminals_[w]||w)+"'":ne="Parse error on line "+(h+1)+": Unexpected "+(w==p?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(ne,{text:this.lexer.match,token:this.terminals_[w]||w,line:this.lexer.yylineno,loc:m,expected:ee})}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+w);switch(N[0]){case 1:o.push(w),c.push(this.lexer.yytext),r.push(this.lexer.yylloc),o.push(N[1]),w=null,n=this.lexer.yyleng,O=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc;break;case 2:if(z=this.productions_[N[1]][1],$.$=c[c.length-z],$._$={first_line:r[r.length-(z||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(z||1)].first_column,last_column:r[r.length-1].last_column},E&&($._$.range=[r[r.length-(z||1)].range[0],r[r.length-1].range[1]]),D=this.performAction.apply($,[O,n,h,this.yy,N[1],c,r].concat(f)),typeof D<"u")return D;z&&(o=o.slice(0,-1*z*2),c=c.slice(0,-1*z),r=r.slice(0,-1*z)),o.push(this.productions_[N[1]][0]),c.push($.$),r.push($._$),K=g[o[o.length-2]][o[o.length-1]],o.push(K);break;case 3:return!0}}return!0}},C={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(s){for(var l in s)this._node[l]=s[l];return this._node},node:function(s){return arguments.length&&(this._node=s),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var s=this._nodes;return this.initialize(),s}},S=(function(){var s={EOF:1,parseError:function(d,o){if(this.yy.parser)this.yy.parser.parseError(d,o);else throw new Error(d)},setInput:function(l){return this._input=l,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var d=l.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var d=l.length,o=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d-1),this.offset-=d;var c=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),o.length-1&&(this.yylineno-=o.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:o?(o.length===c.length?this.yylloc.first_column:0)+c[c.length-o.length].length-o[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-d]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),d=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+d+"^"},test_match:function(l,d){var o,c,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),c=l[0].match(/(?:\r\n?|\n).*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+l[0].length},this.yytext+=l[0],this.match+=l[0],this.matches=l,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(l[0].length),this.matched+=l[0],o=this.performAction.call(this,this.yy,this,d,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(var g in r)this[g]=r[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,d,o,c;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),g=0;g<r.length;g++)if(o=this._input.match(this.rules[r[g]]),o&&(!d||o[0].length>d[0].length)){if(d=o,c=g,this.options.backtrack_lexer){if(l=this.test_match(o,r[g]),l!==!1)return l;if(this._backtrack){d=!1;continue}else return!1}else if(!this.options.flex)break}return d?(l=this.test_match(d,r[c]),l!==!1?l:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var d=this.next();return d||this.lex()},begin:function(d){this.conditionStack.push(d)},popState:function(){var d=this.conditionStack.length-1;return d>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(d){return d=this.conditionStack.length-1-Math.abs(d||0),d>=0?this.conditionStack[d]:"INITIAL"},pushState:function(d){this.begin(d)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(d,o,c,r){switch(c){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return o.yytext=o.yytext.substr(1,o.yyleng-2),32;case 11:return o.yytext=o.yytext.substr(1,o.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return s})();L.lexer=S;function v(){this.yy={}}return v.prototype=L,L.Parser=v,new v})();typeof F<"u"&&typeof P<"u"&&(P.parser=y,P.Parser=y.Parser,P.parse=function(){return y.parse.apply(y,arguments)},P.main=function(C){C[1]||(console.log("Usage: "+C[0]+" FILE"),_.exit(1));var S=F("fs").readFileSync(F("path").normalize(C[1]),"utf8");return P.parser.parse(S)},typeof R<"u"&&F.main===R&&P.main(_.argv.slice(1)))}).call(this,F("_process"))},{_process:14,fs:12,path:13}],2:[function(F,R,P){R.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(F,R,P){var _=F("./dict"),y=F("fs"),L={lex:{macros:{esc:"\\\\",int:_.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[_.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[_.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[_.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};y.readFileSync&&(L.moduleInclude=y.readFileSync(F.resolve("../include/module.js")),L.actionInclude=y.readFileSync(F.resolve("../include/action.js"))),R.exports=L},{"./dict":2,fs:12}],4:[function(F,R,P){var _=F("./aesprim"),y=F("./slice"),L=F("static-eval"),C=F("underscore").uniq,S=function(){return this.initialize.apply(this,arguments)};S.prototype.initialize=function(){this.traverse=d(!0),this.descend=d()},S.prototype.keys=Object.keys,S.prototype.resolve=function(h){var n=[h.operation,h.scope,h.expression.type].join("-"),a=this._fns[n];if(!a)throw new Error("couldn't resolve key: "+n);return a.bind(this)},S.prototype.register=function(h,n){if(!n instanceof Function)throw new Error("handler must be a function");this._fns[h]=n},S.prototype._fns={"member-child-identifier":function(h,n){var a=h.expression.value,p=n.value;if(p instanceof Object&&a in p)return[{value:p[a],path:n.path.concat(a)}]},"member-descendant-identifier":c(function(h,n,a){return h==a}),"subscript-child-numeric_literal":o(function(h,n,a){return h===a}),"member-child-numeric_literal":o(function(h,n,a){return String(h)===String(a)}),"subscript-descendant-numeric_literal":c(function(h,n,a){return h===a}),"member-child-wildcard":o(function(){return!0}),"member-descendant-wildcard":c(function(){return!0}),"subscript-descendant-wildcard":c(function(){return!0}),"subscript-child-wildcard":o(function(){return!0}),"subscript-child-slice":function(h,n){if(s(n.value)){var a=h.expression.value.split(":").map(O),p=n.value.map(function(f,m){return{value:f,path:n.path.concat(m)}});return y.apply(null,[p].concat(a))}},"subscript-child-union":function(h,n){var a=[];return h.expression.value.forEach(function(p){var f={operation:"subscript",scope:"child",expression:p.expression},m=this.resolve(f),E=m(f,n);E&&(a=a.concat(E))},this),g(a)},"subscript-descendant-union":function(h,n,a){var p=F(".."),f=this,m=[],E=p.nodes(n,"$..*").slice(1);return E.forEach(function(k){m.length>=a||h.expression.value.forEach(function(w){var x={operation:"subscript",scope:"child",expression:w.expression},N=f.resolve(x),D=N(x,k);m=m.concat(D)})}),g(m)},"subscript-child-filter_expression":function(h,n,a){var p=h.expression.value.slice(2,-1),f=_.parse(p).body[0].expression,m=function(E,k){return r(f,{"@":k})};return this.descend(n,null,m,a)},"subscript-descendant-filter_expression":function(h,n,a){var p=h.expression.value.slice(2,-1),f=_.parse(p).body[0].expression,m=function(E,k){return r(f,{"@":k})};return this.traverse(n,null,m,a)},"subscript-child-script_expression":function(h,n){var a=h.expression.value.slice(1,-1);return v(n,a,"$[{{value}}]")},"member-child-script_expression":function(h,n){var a=h.expression.value.slice(1,-1);return v(n,a,"$.{{value}}")},"member-descendant-script_expression":function(h,n){var a=h.expression.value.slice(1,-1);return v(n,a,"$..value")}},S.prototype._fns["subscript-child-string_literal"]=S.prototype._fns["member-child-identifier"],S.prototype._fns["member-descendant-numeric_literal"]=S.prototype._fns["subscript-descendant-string_literal"]=S.prototype._fns["member-descendant-identifier"];function v(h,n,a){var p=F("./index"),f=_.parse(n).body[0].expression,m=r(f,{"@":h.value}),E=a.replace(/\{\{\s*value\s*\}\}/g,m),k=p.nodes(h.value,E);return k.forEach(function(w){w.path=h.path.concat(w.path.slice(1))}),k}function s(h){return Array.isArray(h)}function l(h){return h&&!(h instanceof Array)&&h instanceof Object}function d(h){return function(n,a,p,f){var m=n.value,E=n.path,k=[],w=(function(x,N){s(x)?(x.forEach(function(D,$){k.length>=f||p($,D,a)&&k.push({path:N.concat($),value:D})}),x.forEach(function(D,$){k.length>=f||h&&w(D,N.concat($))})):l(x)&&(this.keys(x).forEach(function(D){k.length>=f||p(D,x[D],a)&&k.push({path:N.concat(D),value:x[D]})}),this.keys(x).forEach(function(D){k.length>=f||h&&w(x[D],N.concat(D))}))}).bind(this);return w(m,E),k}}function o(h){return function(n,a,p){return this.descend(a,n.expression.value,h,p)}}function c(h){return function(n,a,p){return this.traverse(a,n.expression.value,h,p)}}function r(){try{return L.apply(this,arguments)}catch{}}function g(h){return h=h.filter(function(n){return n}),C(h,function(n){return n.path.map(function(a){return String(a).replace("-","--")}).join("-")})}function O(h){var n=String(h);return n.match(/^-?[0-9]+$/)?parseInt(n):null}R.exports=S},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"static-eval":15,underscore:12}],5:[function(F,R,P){var _=F("assert"),y=F("./dict"),L=F("./parser"),C=F("./handlers"),S=function(){this.initialize.apply(this,arguments)};S.prototype.initialize=function(){this.parser=new L,this.handlers=new C},S.prototype.parse=function(l){return _.ok(v(l),"we need a path"),this.parser.parse(l)},S.prototype.parent=function(l,d){_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path");var o=this.nodes(l,d)[0];return o.path.pop(),this.value(l,o.path)},S.prototype.apply=function(l,d,o){_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path"),_.equal(typeof o,"function","fn needs to be function");var c=this.nodes(l,d).sort(function(r,g){return g.path.length-r.path.length});return c.forEach(function(r){var g=r.path.pop(),O=this.value(l,this.stringify(r.path)),h=r.value=o.call(l,O[g]);O[g]=h},this),c},S.prototype.value=function(l,d,o){if(_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path"),arguments.length>=3){var c=this.nodes(l,d).shift();if(!c)return this._vivify(l,d,o);var r=c.path.slice(-1).shift(),g=this.parent(l,this.stringify(c.path));g[r]=o}return this.query(l,this.stringify(d),1).shift()},S.prototype._vivify=function(l,d,o){var c=this;_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path");var r=this.parser.parse(d).map(function(O){return O.expression.value}),g=function(O,h){var n=O.pop(),a=c.value(l,O);a||(g(O.concat(),typeof n=="string"?{}:[]),a=c.value(l,O)),a[n]=h};return g(r,o),this.query(l,d)[0]},S.prototype.query=function(l,d,o){_.ok(l instanceof Object,"obj needs to be an object"),_.ok(v(d),"we need a path");var c=this.nodes(l,d,o).map(function(r){return r.value});return c},S.prototype.paths=function(l,d,o){_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path");var c=this.nodes(l,d,o).map(function(r){return r.path});return c},S.prototype.nodes=function(l,d,o){if(_.ok(l instanceof Object,"obj needs to be an object"),_.ok(d,"we need a path"),o===0)return[];var c=this.parser.parse(d),r=this.handlers,g=[{path:["$"],value:l}],O=[];return c.length&&c[0].expression.type=="root"&&c.shift(),c.length?(c.forEach(function(h,n){if(!(O.length>=o)){var a=r.resolve(h),p=[];g.forEach(function(f){if(!(O.length>=o)){var m=a(h,f,o);n==c.length-1?O=O.concat(m||[]):p=p.concat(m||[])}}),g=p}}),o?O.slice(0,o):O):g},S.prototype.stringify=function(l){_.ok(l,"we need a path");var d="$",o={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return l=this._normalize(l),l.forEach(function(c){if(c.expression.type!="root"){var r=[c.scope,c.operation].join("-"),g=o[r],O;if(c.expression.type=="string_literal"?O=JSON.stringify(c.expression.value):O=c.expression.value,!g)throw new Error("couldn't find template "+r);d+=g.replace(/{{value}}/,O)}}),d},S.prototype._normalize=function(l){if(_.ok(l,"we need a path"),typeof l=="string")return this.parser.parse(l);if(Array.isArray(l)&&typeof l[0]=="string"){var d=[{expression:{type:"root",value:"$"}}];return l.forEach(function(o,c){if(!(o=="$"&&c===0))if(typeof o=="string"&&o.match("^"+y.identifier+"$"))d.push({operation:"member",scope:"child",expression:{value:o,type:"identifier"}});else{var r=typeof o=="number"?"numeric_literal":"string_literal";d.push({operation:"subscript",scope:"child",expression:{value:o,type:r}})}}),d}else if(Array.isArray(l)&&typeof l[0]=="object")return l;throw new Error("couldn't understand path "+l)};function v(l){return Object.prototype.toString.call(l)=="[object String]"}S.Handlers=C,S.Parser=L;var s=new S;s.JSONPath=S,R.exports=s},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(F,R,P){var _=F("./grammar"),y=F("../generated/parser"),L=function(){var C=new y.Parser,S=C.parseError;return C.yy.parseError=function(){C.yy.ast&&C.yy.ast.initialize(),S.apply(C,arguments)},C};L.grammar=_,R.exports=L},{"../generated/parser":1,"./grammar":3}],7:[function(F,R,P){R.exports=function(y,L,C,S){if(typeof L=="string")throw new Error("start cannot be a string");if(typeof C=="string")throw new Error("end cannot be a string");if(typeof S=="string")throw new Error("step cannot be a string");var v=y.length;if(S===0)throw new Error("step cannot be zero");if(S=S?_(S):1,L=L<0?v+L:L,C=C<0?v+C:C,L=_(L===0?0:L||(S>0?0:v-1)),C=_(C===0?0:C||(S>0?v:-1)),L=S>0?Math.max(0,L):Math.min(v,L),C=S>0?Math.min(C,v):Math.max(-1,C),S>0&&C<=L)return[];if(S<0&&L<=C)return[];for(var s=[],l=L;l!=C&&!(S<0&&l<=C||S>0&&l>=C);l+=S)s.push(y[l]);return s};function _(y){return String(y).match(/^[0-9]+$/)?parseInt(y):Number.isFinite(y)?parseInt(y,10):0}},{}],8:[function(F,R,P){var _=F("util/"),y=Array.prototype.slice,L=Object.prototype.hasOwnProperty,C=R.exports=d;C.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var p=a.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,p);else{var f=new Error;if(f.stack){var m=f.stack,E=p.name,k=m.indexOf(`
`+E);if(k>=0){var w=m.indexOf(`
`,k+1);m=m.substring(w+1)}this.stack=m}}},_.inherits(C.AssertionError,Error);function S(n,a){return _.isUndefined(a)?""+a:_.isNumber(a)&&!isFinite(a)||_.isFunction(a)||_.isRegExp(a)?a.toString():a}function v(n,a){return _.isString(n)?n.length<a?n:n.slice(0,a):n}function s(n){return v(JSON.stringify(n.actual,S),128)+" "+n.operator+" "+v(JSON.stringify(n.expected,S),128)}function l(n,a,p,f,m){throw new C.AssertionError({message:p,actual:n,expected:a,operator:f,stackStartFunction:m})}C.fail=l;function d(n,a){n||l(n,!0,a,"==",C.ok)}C.ok=d,C.equal=function(a,p,f){a!=p&&l(a,p,f,"==",C.equal)},C.notEqual=function(a,p,f){a==p&&l(a,p,f,"!=",C.notEqual)},C.deepEqual=function(a,p,f){o(a,p)||l(a,p,f,"deepEqual",C.deepEqual)};function o(n,a){if(n===a)return!0;if(_.isBuffer(n)&&_.isBuffer(a)){if(n.length!=a.length)return!1;for(var p=0;p<n.length;p++)if(n[p]!==a[p])return!1;return!0}else return _.isDate(n)&&_.isDate(a)?n.getTime()===a.getTime():_.isRegExp(n)&&_.isRegExp(a)?n.source===a.source&&n.global===a.global&&n.multiline===a.multiline&&n.lastIndex===a.lastIndex&&n.ignoreCase===a.ignoreCase:!_.isObject(n)&&!_.isObject(a)?n==a:r(n,a)}function c(n){return Object.prototype.toString.call(n)=="[object Arguments]"}function r(n,a){if(_.isNullOrUndefined(n)||_.isNullOrUndefined(a)||n.prototype!==a.prototype)return!1;if(_.isPrimitive(n)||_.isPrimitive(a))return n===a;var p=c(n),f=c(a);if(p&&!f||!p&&f)return!1;if(p)return n=y.call(n),a=y.call(a),o(n,a);var m=h(n),E=h(a),k,w;if(m.length!=E.length)return!1;for(m.sort(),E.sort(),w=m.length-1;w>=0;w--)if(m[w]!=E[w])return!1;for(w=m.length-1;w>=0;w--)if(k=m[w],!o(n[k],a[k]))return!1;return!0}C.notDeepEqual=function(a,p,f){o(a,p)&&l(a,p,f,"notDeepEqual",C.notDeepEqual)},C.strictEqual=function(a,p,f){a!==p&&l(a,p,f,"===",C.strictEqual)},C.notStrictEqual=function(a,p,f){a===p&&l(a,p,f,"!==",C.notStrictEqual)};function g(n,a){return!n||!a?!1:Object.prototype.toString.call(a)=="[object RegExp]"?a.test(n):n instanceof a?!0:a.call({},n)===!0}function O(n,a,p,f){var m;_.isString(p)&&(f=p,p=null);try{a()}catch(E){m=E}if(f=(p&&p.name?" ("+p.name+").":".")+(f?" "+f:"."),n&&!m&&l(m,p,"Missing expected exception"+f),!n&&g(m,p)&&l(m,p,"Got unwanted exception"+f),n&&m&&p&&!g(m,p)||!n&&m)throw m}C.throws=function(n,a,p){O.apply(this,[!0].concat(y.call(arguments)))},C.doesNotThrow=function(n,a){O.apply(this,[!1].concat(y.call(arguments)))},C.ifError=function(n){if(n)throw n};var h=Object.keys||function(n){var a=[];for(var p in n)L.call(n,p)&&a.push(p);return a}},{"util/":11}],9:[function(F,R,P){typeof Object.create=="function"?R.exports=function(y,L){y.super_=L,y.prototype=Object.create(L.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}})}:R.exports=function(y,L){y.super_=L;var C=function(){};C.prototype=L.prototype,y.prototype=new C,y.prototype.constructor=y}},{}],10:[function(F,R,P){R.exports=function(y){return y&&typeof y=="object"&&typeof y.copy=="function"&&typeof y.fill=="function"&&typeof y.readUInt8=="function"}},{}],11:[function(F,R,P){(function(_,y){var L=/%[sdj%]/g;P.format=function(b){if(!E(b)){for(var T=[],M=0;M<arguments.length;M++)T.push(v(arguments[M]));return T.join(" ")}for(var M=1,Q=arguments,ie=Q.length,H=String(b).replace(L,function(Z){if(Z==="%%")return"%";if(M>=ie)return Z;switch(Z){case"%s":return String(Q[M++]);case"%d":return Number(Q[M++]);case"%j":try{return JSON.stringify(Q[M++])}catch{return"[Circular]"}default:return Z}}),j=Q[M];M<ie;j=Q[++M])p(j)||!N(j)?H+=" "+j:H+=" "+v(j);return H},P.deprecate=function(b,T){if(w(y.process))return function(){return P.deprecate(b,T).apply(this,arguments)};if(_.noDeprecation===!0)return b;var M=!1;function Q(){if(!M){if(_.throwDeprecation)throw new Error(T);_.traceDeprecation?console.trace(T):console.error(T),M=!0}return b.apply(this,arguments)}return Q};var C={},S;P.debuglog=function(b){if(w(S)&&(S=_.env.NODE_DEBUG||""),b=b.toUpperCase(),!C[b])if(new RegExp("\\b"+b+"\\b","i").test(S)){var T=_.pid;C[b]=function(){var M=P.format.apply(P,arguments);console.error("%s %d: %s",b,T,M)}}else C[b]=function(){};return C[b]};function v(b,T){var M={seen:[],stylize:l};return arguments.length>=3&&(M.depth=arguments[2]),arguments.length>=4&&(M.colors=arguments[3]),a(T)?M.showHidden=T:T&&P._extend(M,T),w(M.showHidden)&&(M.showHidden=!1),w(M.depth)&&(M.depth=2),w(M.colors)&&(M.colors=!1),w(M.customInspect)&&(M.customInspect=!0),M.colors&&(M.stylize=s),o(M,b,M.depth)}P.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(b,T){var M=v.styles[T];return M?"\x1B["+v.colors[M][0]+"m"+b+"\x1B["+v.colors[M][1]+"m":b}function l(b,T){return b}function d(b){var T={};return b.forEach(function(M,Q){T[M]=!0}),T}function o(b,T,M){if(b.customInspect&&T&&J(T.inspect)&&T.inspect!==P.inspect&&!(T.constructor&&T.constructor.prototype===T)){var Q=T.inspect(M,b);return E(Q)||(Q=o(b,Q,M)),Q}var ie=c(b,T);if(ie)return ie;var H=Object.keys(T),j=d(H);if(b.showHidden&&(H=Object.getOwnPropertyNames(T)),$(T)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return r(T);if(H.length===0){if(J(T)){var Z=T.name?": "+T.name:"";return b.stylize("[Function"+Z+"]","special")}if(x(T))return b.stylize(RegExp.prototype.toString.call(T),"regexp");if(D(T))return b.stylize(Date.prototype.toString.call(T),"date");if($(T))return r(T)}var te="",ce=!1,ve=["{","}"];if(n(T)&&(ce=!0,ve=["[","]"]),J(T)){var Oe=T.name?": "+T.name:"";te=" [Function"+Oe+"]"}if(x(T)&&(te=" "+RegExp.prototype.toString.call(T)),D(T)&&(te=" "+Date.prototype.toUTCString.call(T)),$(T)&&(te=" "+r(T)),H.length===0&&(!ce||T.length==0))return ve[0]+te+ve[1];if(M<0)return x(T)?b.stylize(RegExp.prototype.toString.call(T),"regexp"):b.stylize("[Object]","special");b.seen.push(T);var Ee;return ce?Ee=g(b,T,M,j,H):Ee=H.map(function(we){return O(b,T,M,j,we,ce)}),b.seen.pop(),h(Ee,te,ve)}function c(b,T){if(w(T))return b.stylize("undefined","undefined");if(E(T)){var M="'"+JSON.stringify(T).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return b.stylize(M,"string")}if(m(T))return b.stylize(""+T,"number");if(a(T))return b.stylize(""+T,"boolean");if(p(T))return b.stylize("null","null")}function r(b){return"["+Error.prototype.toString.call(b)+"]"}function g(b,T,M,Q,ie){for(var H=[],j=0,Z=T.length;j<Z;++j)me(T,String(j))?H.push(O(b,T,M,Q,String(j),!0)):H.push("");return ie.forEach(function(te){te.match(/^\d+$/)||H.push(O(b,T,M,Q,te,!0))}),H}function O(b,T,M,Q,ie,H){var j,Z,te;if(te=Object.getOwnPropertyDescriptor(T,ie)||{value:T[ie]},te.get?te.set?Z=b.stylize("[Getter/Setter]","special"):Z=b.stylize("[Getter]","special"):te.set&&(Z=b.stylize("[Setter]","special")),me(Q,ie)||(j="["+ie+"]"),Z||(b.seen.indexOf(te.value)<0?(p(M)?Z=o(b,te.value,null):Z=o(b,te.value,M-1),Z.indexOf(`
`)>-1&&(H?Z=Z.split(`
`).map(function(ce){return"  "+ce}).join(`
`).substr(2):Z=`
`+Z.split(`
`).map(function(ce){return"   "+ce}).join(`
`))):Z=b.stylize("[Circular]","special")),w(j)){if(H&&ie.match(/^\d+$/))return Z;j=JSON.stringify(""+ie),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.substr(1,j.length-2),j=b.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=b.stylize(j,"string"))}return j+": "+Z}function h(b,T,M){var Q=b.reduce(function(ie,H){return H.indexOf(`
`)>=0,ie+H.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Q>60?M[0]+(T===""?"":T+`
 `)+" "+b.join(`,
  `)+" "+M[1]:M[0]+T+" "+b.join(", ")+" "+M[1]}function n(b){return Array.isArray(b)}P.isArray=n;function a(b){return typeof b=="boolean"}P.isBoolean=a;function p(b){return b===null}P.isNull=p;function f(b){return b==null}P.isNullOrUndefined=f;function m(b){return typeof b=="number"}P.isNumber=m;function E(b){return typeof b=="string"}P.isString=E;function k(b){return typeof b=="symbol"}P.isSymbol=k;function w(b){return b===void 0}P.isUndefined=w;function x(b){return N(b)&&K(b)==="[object RegExp]"}P.isRegExp=x;function N(b){return typeof b=="object"&&b!==null}P.isObject=N;function D(b){return N(b)&&K(b)==="[object Date]"}P.isDate=D;function $(b){return N(b)&&(K(b)==="[object Error]"||b instanceof Error)}P.isError=$;function J(b){return typeof b=="function"}P.isFunction=J;function z(b){return b===null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||typeof b=="symbol"||typeof b>"u"}P.isPrimitive=z,P.isBuffer=F("./support/isBuffer");function K(b){return Object.prototype.toString.call(b)}function ee(b){return b<10?"0"+b.toString(10):b.toString(10)}var ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Y(){var b=new Date,T=[ee(b.getHours()),ee(b.getMinutes()),ee(b.getSeconds())].join(":");return[b.getDate(),ne[b.getMonth()],T].join(" ")}P.log=function(){console.log("%s - %s",Y(),P.format.apply(P,arguments))},P.inherits=F("inherits"),P._extend=function(b,T){if(!T||!N(T))return b;for(var M=Object.keys(T),Q=M.length;Q--;)b[M[Q]]=T[M[Q]];return b};function me(b,T){return Object.prototype.hasOwnProperty.call(b,T)}}).call(this,F("_process"),typeof Ve<"u"?Ve:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":10,_process:14,inherits:9}],12:[function(F,R,P){},{}],13:[function(F,R,P){(function(_){function y(v,s){for(var l=0,d=v.length-1;d>=0;d--){var o=v[d];o==="."?v.splice(d,1):o===".."?(v.splice(d,1),l++):l&&(v.splice(d,1),l--)}if(s)for(;l--;l)v.unshift("..");return v}P.resolve=function(){for(var v="",s=!1,l=arguments.length-1;l>=-1&&!s;l--){var d=l>=0?arguments[l]:_.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!d)continue;v=d+"/"+v,s=d.charAt(0)==="/"}return v=y(C(v.split("/"),function(o){return!!o}),!s).join("/"),(s?"/":"")+v||"."},P.normalize=function(v){var s=P.isAbsolute(v),l=S(v,-1)==="/";return v=y(C(v.split("/"),function(d){return!!d}),!s).join("/"),!v&&!s&&(v="."),v&&l&&(v+="/"),(s?"/":"")+v},P.isAbsolute=function(v){return v.charAt(0)==="/"},P.join=function(){var v=Array.prototype.slice.call(arguments,0);return P.normalize(C(v,function(s,l){if(typeof s!="string")throw new TypeError("Arguments to path.join must be strings");return s}).join("/"))},P.relative=function(v,s){v=P.resolve(v).substr(1),s=P.resolve(s).substr(1);function l(h){for(var n=0;n<h.length&&h[n]==="";n++);for(var a=h.length-1;a>=0&&h[a]==="";a--);return n>a?[]:h.slice(n,a-n+1)}for(var d=l(v.split("/")),o=l(s.split("/")),c=Math.min(d.length,o.length),r=c,g=0;g<c;g++)if(d[g]!==o[g]){r=g;break}for(var O=[],g=r;g<d.length;g++)O.push("..");return O=O.concat(o.slice(r)),O.join("/")},P.sep="/",P.delimiter=":",P.dirname=function(v){if(typeof v!="string"&&(v=v+""),v.length===0)return".";for(var s=v.charCodeAt(0),l=s===47,d=-1,o=!0,c=v.length-1;c>=1;--c)if(s=v.charCodeAt(c),s===47){if(!o){d=c;break}}else o=!1;return d===-1?l?"/":".":l&&d===1?"/":v.slice(0,d)};function L(v){typeof v!="string"&&(v=v+"");var s=0,l=-1,d=!0,o;for(o=v.length-1;o>=0;--o)if(v.charCodeAt(o)===47){if(!d){s=o+1;break}}else l===-1&&(d=!1,l=o+1);return l===-1?"":v.slice(s,l)}P.basename=function(v,s){var l=L(v);return s&&l.substr(-1*s.length)===s&&(l=l.substr(0,l.length-s.length)),l},P.extname=function(v){typeof v!="string"&&(v=v+"");for(var s=-1,l=0,d=-1,o=!0,c=0,r=v.length-1;r>=0;--r){var g=v.charCodeAt(r);if(g===47){if(!o){l=r+1;break}continue}d===-1&&(o=!1,d=r+1),g===46?s===-1?s=r:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||d===-1||c===0||c===1&&s===d-1&&s===l+1?"":v.slice(s,d)};function C(v,s){if(v.filter)return v.filter(s);for(var l=[],d=0;d<v.length;d++)s(v[d],d,v)&&l.push(v[d]);return l}var S="ab".substr(-1)==="b"?function(v,s,l){return v.substr(s,l)}:function(v,s,l){return s<0&&(s=v.length+s),v.substr(s,l)}}).call(this,F("_process"))},{_process:14}],14:[function(F,R,P){var _=R.exports={},y,L;function C(){throw new Error("setTimeout has not been defined")}function S(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?y=setTimeout:y=C}catch{y=C}try{typeof clearTimeout=="function"?L=clearTimeout:L=S}catch{L=S}})();function v(n){if(y===setTimeout)return setTimeout(n,0);if((y===C||!y)&&setTimeout)return y=setTimeout,setTimeout(n,0);try{return y(n,0)}catch{try{return y.call(null,n,0)}catch{return y.call(this,n,0)}}}function s(n){if(L===clearTimeout)return clearTimeout(n);if((L===S||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(n);try{return L(n)}catch{try{return L.call(null,n)}catch{return L.call(this,n)}}}var l=[],d=!1,o,c=-1;function r(){!d||!o||(d=!1,o.length?l=o.concat(l):c=-1,l.length&&g())}function g(){if(!d){var n=v(r);d=!0;for(var a=l.length;a;){for(o=l,l=[];++c<a;)o&&o[c].run();c=-1,a=l.length}o=null,d=!1,s(n)}}_.nextTick=function(n){var a=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)a[p-1]=arguments[p];l.push(new O(n,a)),l.length===1&&!d&&v(g)};function O(n,a){this.fun=n,this.array=a}O.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={};function h(){}_.on=h,_.addListener=h,_.once=h,_.off=h,_.removeListener=h,_.removeAllListeners=h,_.emit=h,_.prependListener=h,_.prependOnceListener=h,_.listeners=function(n){return[]},_.binding=function(n){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(n){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},{}],15:[function(F,R,P){var _=F("escodegen").generate;R.exports=function(y,L){L||(L={});var C={},S=(function v(s,l){if(s.type==="Literal")return s.value;if(s.type==="UnaryExpression"){var d=v(s.argument);return s.operator==="+"?+d:s.operator==="-"?-d:s.operator==="~"?~d:s.operator==="!"?!d:C}else if(s.type==="ArrayExpression"){for(var o=[],c=0,r=s.elements.length;c<r;c++){var g=v(s.elements[c]);if(g===C)return C;o.push(g)}return o}else if(s.type==="ObjectExpression"){for(var O={},c=0;c<s.properties.length;c++){var h=s.properties[c],n=h.value===null?h.value:v(h.value);if(n===C)return C;O[h.key.value||h.key.name]=n}return O}else if(s.type==="BinaryExpression"||s.type==="LogicalExpression"){var r=v(s.left);if(r===C)return C;var a=v(s.right);if(a===C)return C;var p=s.operator;return p==="=="?r==a:p==="==="?r===a:p==="!="?r!=a:p==="!=="?r!==a:p==="+"?r+a:p==="-"?r-a:p==="*"?r*a:p==="/"?r/a:p==="%"?r%a:p==="<"?r<a:p==="<="?r<=a:p===">"?r>a:p===">="?r>=a:p==="|"?r|a:p==="&"?r&a:p==="^"?r^a:p==="&&"?r&&a:p==="||"?r||a:C}else{if(s.type==="Identifier")return{}.hasOwnProperty.call(L,s.name)?L[s.name]:C;if(s.type==="ThisExpression")return{}.hasOwnProperty.call(L,"this")?L.this:C;if(s.type==="CallExpression"){var f=v(s.callee);if(f===C||typeof f!="function")return C;var m=s.callee.object?v(s.callee.object):C;m===C&&(m=null);for(var E=[],c=0,r=s.arguments.length;c<r;c++){var g=v(s.arguments[c]);if(g===C)return C;E.push(g)}return f.apply(m,E)}else if(s.type==="MemberExpression"){var O=v(s.object);if(O===C||typeof O=="function")return C;if(s.property.type==="Identifier")return O[s.property.name];var h=v(s.property);return h===C?C:O[h]}else if(s.type==="ConditionalExpression"){var d=v(s.test);return d===C?C:v(d?s.consequent:s.alternate)}else if(s.type==="ExpressionStatement"){var d=v(s.expression);return d===C?C:d}else{if(s.type==="ReturnStatement")return v(s.argument);if(s.type==="FunctionExpression"){var k=s.body.body,w={};Object.keys(L).forEach(function(ne){w[ne]=L[ne]});for(var c=0;c<s.params.length;c++){var x=s.params[c];if(x.type=="Identifier")L[x.name]=null;else return C}for(var c in k)if(v(k[c])===C)return C;L=w;var N=Object.keys(L),D=N.map(function(ne){return L[ne]});return Function(N.join(", "),"return "+_(s)).apply(null,D)}else if(s.type==="TemplateLiteral"){for(var $="",c=0;c<s.expressions.length;c++)$+=v(s.quasis[c]),$+=v(s.expressions[c]);return $+=v(s.quasis[c]),$}else if(s.type==="TaggedTemplateExpression"){var J=v(s.tag),z=s.quasi,K=z.quasis.map(v),ee=z.expressions.map(v);return J.apply(null,[K].concat(ee))}else return s.type==="TemplateElement"?s.value.cooked:C}}})(y);return S===C?void 0:S}},{escodegen:12}],jsonpath:[function(F,R,P){R.exports=F("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")})})(De)),De.exports}var Bt=Ft();function qt(xe){let ge=Dt(),F=Mt(),R=new Bt.JSONPath;function P(m,E){var k={};ge.state.geonetwork&&(E.logo&&(k.logo=ge.state.geonetwork+"/"+E.logo.replace(/^\//,"")),k.exportLinks={xml:ge.state.geonetwork+"/srv/api/records/"+m+"/formatters/xml?attachment=true",pdf:ge.state.geonetwork+"/srv/api/records/"+m+"/formatters/xsl-view?root=div&output=pdf"}),k.group=E.group;var w=ge.state.locale;w==="fre"?w="FR":w="EN",k.uuid=m,k.title=g(R.query(E,"$..['gmd:citation']['gmd:CI_Citation']['gmd:title']"),w);var x=g(R.query(E,"$..['gmd:abstract']"),w);x&&Array.isArray(x)?x=x[0]:x||(x=""),k.dateStamp=E["gmd:dateStamp"]["gco:DateTime"]["#text"],k.description=x.replace(/(?:\\[rn]|[\r\n])/g,"<br />"),k.credit=g(E["gmd:credit"],w),k.purpose=g(E["gmd:purpose"],w),E["gmd:parentIdentifier"]&&(k.parentIdentifier=E["gmd:parentIdentifier"]["gco:CharacterString"]["#text"]),E["gmd:hierarchyLevel"]?k.hierarchyLevel=E["gmd:hierarchyLevel"]["gmd:MD_ScopeCode"]["@codeListValue"]:k.hierarchyLevel="dataset",k.purpose&&(k.purpose=k.purpose.replace(/(?:\\[rn]|[\r\n])/g,"<br />"));var N=E["gmd:identificationInfo"]["gmd:MD_DataIdentification"];k.status=R.query(E,"$..['gmd:status']['gmd:MD_ProgressCode']['@codeListValue']")[0],k.identifier=R.query(N,"$..['gmd:identifier']..['gco:CharacterString']['#text']")[0],N["gmd:topicCategory"]&&(k.topicCat=N["gmd:topicCategory"]["gmd:MD_TopicCategoryCode"]),h(k,N["gmd:descriptiveKeywords"],w),k.images=O(N["gmd:graphicOverview"],w);var D=C(R.query(N,"$..['gmd:resourceConstraints']..['gmd:MD_LegalConstraints']"),w);D&&(k.legalConstraints=D);var D=C(R.query(N,"$..['gmd:resourceConstraints']..['gmd:MD_Constraints']"),w);D&&(k.constraints=D),n(k,E,w),s(k,E,w);var $=S(R.query(N["gmd:pointOfContact"],"$..['gmd:CI_ResponsibleParty']"),w);k.contacts={resource:$};var $=S(R.query(E["gmd:contact"],"$..['gmd:CI_ResponsibleParty']"),w);k.contacts.metadata=$;var J=E["gmd:distributionInfo"]["gmd:MD_Distribution"]["gmd:distributionFormat"]||{};return o(k,J,w),a(k,E,w,m),d(k,N["gmd:extent"]),l(k,R.query(N,"$..['gmd:citation']..['gmd:CI_Date']")),y(k,N["gmd:aggregationInfo"]),p(k,N["gmd:spatialResolution"]),f(k,N["gmd:spatialRepresentationType"]),k}function _(m){if(m===void 0)return null;var E=[];for(var k in m)k!=="gmd:electronicMailAddress"&&m[k]["gco:CharacterString"]&&m[k]["gco:CharacterString"]["#text"]&&E.push(m[k]["gco:CharacterString"]["#text"]);return E.length==0?null:E.join(",")}function y(m,E){!E||E===void 0||(m.related||(m.related={siblings:[]}),m.related.siblings||(m.related.siblings=[]),E&&!E.forEach&&(E=[E]),E.forEach(function(k){var w=k["gmd:MD_AggregateInformation"]["gmd:initiativeType"]["gmd:DS_InitiativeTypeCode"]["@codeListValue"],x=R.query(k,"$..['gmd:MD_Identifier']..['#text']");x.length>0&&m.related.siblings.push({initiativeType:w,title:x[0],id:x[0]})}))}function L(m){if(m===void 0)return null;var E=m["gmd:southBoundLatitude"]["gco:Decimal"]["#text"],k=m["gmd:northBoundLatitude"]["gco:Decimal"]["#text"],w=m["gmd:westBoundLongitude"]["gco:Decimal"]["#text"],x=m["gmd:eastBoundLongitude"]["gco:Decimal"]["#text"],N=[[[parseFloat(w),parseFloat(E)],[parseFloat(w),parseFloat(k)],[parseFloat(x),parseFloat(k)],[parseFloat(x),parseFloat(E)],[parseFloat(w),parseFloat(E)]]];return N}function C(m,E){if(!m)return null;var k=[];return!m||m.length===0?null:(m.forEach(function(w){var x=w["gmd:otherConstraints"];if(x){var x=x.forEach?x:[x];x.forEach(function(D){k.push(g(D,E))})}var x=w["gmd:useLimitation"];if(x){var x=x.forEach?x:[x];x.forEach(function(D){k.push(g(D,E))})}}),k)}function S(m,E){var k=[];if(!m)return k;m.length>0?m.forEach(function(x){k.push(v(x,E))}):k.push(v(m,E));var w={};return k.forEach(function(x){w[x[0]]?w[x[0]].push(x):w[x[0]]=[x]}),w}function v(m,E){var k=R.query(m,"$..['gmd:CI_RoleCode']['@codeListValue']")[0],w=R.query(m,"$..['gmd:organisationName']")[0],x=g(w,E),N=r(w),D=R.query(m,"$..['gmd:individualName']")[0],$=g(D,E),J=r(D),z=R.query(m,"$..['gmd:electronicMailAddress']..['#text']")[0],K=_(R.query(m,"$..['gmd:CI_Address']")[0]),ee=null;return[k,type,x,$,z,ee,null,K,N,J]}function s(m,E,k){var w=R.query(E,"$..['gmd:referenceSystemInfo']..['gmd:code']");m.crs=[],w.forEach(function(x){m.crs.push(g(x,k))})}function l(m,E){!E||E==="undefined"||E.length===0||E.forEach(function(k){var w=k["gmd:dateType"]["gmd:CI_DateTypeCode"]["@codeListValue"],x=k["gmd:date"]["gco:Date"]?k["gmd:date"]["gco:Date"]["#text"]:k["gmd:date"]["gco:DateTime"]["#text"];m[w+"Date"]=x})}function d(m,E){m.temporalExtents=[];var k=R.query(E,"$..['gml:beginPosition']");if(k.length>0){var w={start:{date:k[0]}},x=R.query(E,"$..['gml:endPosition']");x.length>0&&(w.end={date:x[0]}),m.temporalExtents.push(w)}var N=R.query(E,"$..['gmd:EX_GeographicBoundingBox']");N.length!==0&&(N.length>1?(m.geojson={type:"FeatureCollection",features:[]},N.forEach(function(D){m.geojson.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:L(D)}})})):m.geojson={type:"Feature",geometry:{type:"Polygon",coordinates:L(N[0])}})}function o(m,E,k){var w=[],x=R.query(E,"$..['gmd:MD_Format']");if(x===void 0)return w;x.forEach||(x=[x]),x.forEach(function(N){w.push(g(N["gmd:name"],k))}),m.format=w}function c(m,E){if(E=new URL(E),E.search.length>3){var k=E.search.replace("?","").split("&");E=E.protocol+"//"+E.hostname+E.pathname,console.log(E)}else{if(!m)return{search:"free",view:"UNKNOWN",download:"UNKOWN"};var k=m.split(";")}var w={},x={};return k.forEach(function(N){var D=N.split("=");D.length>1&&["search","view","download"].indexOf(D[0])>=0?w[D[0]]=D[1]:x[D[0]]=D[1].split(",")}),{access:w,query:x,url:E}}function r(m){if(m===void 0)return null;var E=R.query(m,"$..['gmx:Anchor']['@xlink:href']");return E.length>0?E[0]:null}function g(m,E){var k=null;if(m===void 0)return null;if(E){var w=R.query(m,"$..['gmd:LocalisedCharacterString']");w.length>0&&w.forEach(function(x){x["@locale"]==="#"+E&&x["#text"]&&(k=x["#text"])})}return k||(m=m.length>0?m[0]:m,k=m["gco:CharacterString"]?m["gco:CharacterString"]["#text"]:m["gmx:Anchor"]?m["gmx:Anchor"]["#text"]:null),k}function O(m,E){var k=[];return m===void 0?null:(m.forEach||(m=[m]),m.forEach(function(w){if(w["gmd:MD_BrowseGraphic"]["gmd:fileName"]["gco:CharacterString"]){var x=w["gmd:MD_BrowseGraphic"]["gmd:fileName"]["gco:CharacterString"]["#text"],N=g(w["gmd:MD_BrowseGraphic"]["gmd:fileDescription"],E);k.push(["overview",x,N||""])}}),k)}function h(m,E,k){var w=[];E&&E.forEach(function(x){var N=x["gmd:MD_Keywords"]["gmd:keyword"],D=R.query(x,"$..['gmd:MD_KeywordTypeCode']['@codeListValue']");D?D=D[0]:D=null;var $=!1;if(x["gmd:MD_Keywords"]["gmd:thesaurusName"]){var J=R.query(x["gmd:MD_Keywords"]["gmd:thesaurusName"],"$..['gmd:identifier']..['gmd:code']['gmx:Anchor']['#text']")[0];if(console.log(J),J){var z=J.split(".");D=z[3];var J="th_"+z.slice(4,z.length+1).join(".");R.query(x["gmd:MD_Keywords"]["gmd:thesaurusName"],"$..['gmd:title']..['#text']"),F.organismThesaurus&&J.indexOf(F.organismThesaurus.th_name)>=0&&(console.log("est dataCenter ",J),$=!0)}}N.forEach||(N=[N]);var K=[];$&&(m.dataCenter=[]),N.forEach(function(ee){var ne=g(ee,k),Y=R.query(ee,"$..['gmx:Anchor']['@xlink:href']");Y&&(Y=Y[0]),ne&&(K.push({name:g(ee,k),link:Y}),$&&m.dataCenter.push(F.organisms[Y]))}),w.push({type:D,key:J,keywords:K})}),m.keyword=w}function n(m,E,k){m.lineage="un tesst curiosité";var w=R.query(E,"$..['gmd:statement']"),x=[];w.forEach(function(N){x.push(g(N,k))}),m.lineage=x}function a(m,E,k,w){var x={},N=R.query(E,"$..['gmd:CI_OnlineResource']");if(N[0]&&N[0].length>0){var D=[];N.forEach(function($){D=D.concat($)}),N=D}N.forEach(function($,J){var z="WWW:LINK-1.0-http--link";if($["gmd:protocol"]["gmx:Anchor"])var z=$["gmd:protocol"]["gmx:Anchor"]["#text"];else if($["gmd:protocol"]["gco:CharacterString"])var z=$["gmd:protocol"]["gco:CharacterString"]["#text"];var K=$["gmd:linkage"]["gmd:URL"],ee=g($["gmd:name"],k),ne=g($["gmd:description"],k),Y={id:J,name:ee,description:ne,url:K,type:z};switch(z){case"UKST":case"OpenSearch":case"Opensearch":case"opensearch":case"SensorThings":case"STAC":var me=c(ne,K);console.log(K),x.api||(x.api={}),x.api[z]={url:me.url,name:ee,protocol:z,access:me.access,query:me.query},m[z.toLowerCase()]=K;break;case"GetMap":case"WTS":case"WMTS":case"OGC API - Tiles":case"XYZ-Tile-Service":case"OGC:WMS":case"OGC:WMS-1.1.1-http-get-map":case"OGC:WFS":case"OGC:WFS-G":case"OGC:KML":case"OGC:OWS":case"OGC:OWS-C":case"OGC Web Map Service":case"GLG:KML-2.0-http-get-map":x.layers||(x.layers=[]);var b=w+"_"+x.layers.length;Y.id=b,x.layers.push(Y);break;case"application/vnd.google-earth.kml+xml":case"WWW:DOWNLOAD-1.0-ftp--download":break;case"WWW:DOWNLOAD-1.0-link--download":case"telechargement":case"download":case"WWW:DOWNLOAD-1.0-http--download":x.download||(x.download=[]),x.download.push(Y);break;case"WWW:DOWNLOAD-1.0-link--order":case"order":x.order||(x.order=[]),x.order.push(Y);break;case"WWW:LINK-1.0-http--related":x.relatedLinks||(x.relatedLinks=[]),x.relatedLinks.push(Y);break;case"WWW:LINK-1.0-http--link":case"WWW:LINK-1.0-http--partners":case"DOI":default:x.links||(x.links=[]),x.links.push(Y);break}}),m.links=x}function p(m,E){if(E!==void 0){var k=R.query(E,"$..['gco:Distance']"),w=R.query(E,"$..['gmd:denominator']['gco:Integer']"),x=[];if(k&&k.length>0){var N=k.map(D=>D["#text"]+" "+D["@uom"]);x=N}if(w&&w.length>0){var N=k.map($=>"1 / "+$["#text"]);x=x.concat(N)}m.resolution=x}}function f(m,E){E!==void 0&&E["gmd:MD_SpatialRepresentationTypeCode"]&&E["gmd:MD_SpatialRepresentationTypeCode"]["@codeListValue"]&&(m.representation=E["gmd:MD_SpatialRepresentationTypeCode"]["@codeListValue"])}return{transform:P}}export{qt as default};
